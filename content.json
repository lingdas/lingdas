{"meta":{"title":"lovelves","subtitle":null,"description":"å…‰é¢–","author":"lovelves","url":"https://lingdas.github.io"},"pages":[{"title":"bangumi","date":"2019-02-10T13:32:48.000Z","updated":"2020-03-16T10:41:30.000Z","comments":false,"path":"bangumi/index.html","permalink":"https://lingdas.github.io/bangumi/index.html","excerpt":"","text":"","keywords":null},{"title":"about","date":"2021-06-12T14:14:36.000Z","updated":"2021-06-10T15:27:41.000Z","comments":false,"path":"about/index.html","permalink":"https://lingdas.github.io/about/index.html","excerpt":"","text":"[lovelvesçš„å®¶] ä¸&nbsp; lovelves&nbsp; ï¼ˆ é¾™å‚²å¤© ï¼‰ å¯¹è¯ä¸­... bot_ui_ini()","keywords":"å…³äº"},{"title":"client","date":"2018-12-20T15:13:35.000Z","updated":"2020-03-16T10:41:30.000Z","comments":false,"path":"client/index.html","permalink":"https://lingdas.github.io/client/index.html","excerpt":"","text":"ç›´æ¥ä¸‹è½½ or æ‰«ç ä¸‹è½½ï¼š","keywords":"Androidå®¢æˆ·ç«¯"},{"title":"comment","date":"2018-12-20T15:13:48.000Z","updated":"2020-03-16T10:41:30.000Z","comments":true,"path":"comment/index.html","permalink":"https://lingdas.github.io/comment/index.html","excerpt":"","text":"å¿µä¸¤å¥è¯— å™åˆ«æ¢¦ã€æ‰¬å·ä¸€è§‰ã€‚ ã€å®‹ä»£ã€‘å´æ–‡è‹±ã€Šå¤œæ¸¸å®«Â·äººå»è¥¿æ¥¼é›æ³ã€‹","keywords":"ç•™è¨€æ¿"},{"title":"donate","date":"2018-12-20T15:13:05.000Z","updated":"2020-03-16T10:41:30.000Z","comments":false,"path":"donate/index.html","permalink":"https://lingdas.github.io/donate/index.html","excerpt":"","text":"","keywords":"è°¢è°¢é¥²ä¸»äº†å–µ~"},{"title":"lab","date":"2019-01-05T13:47:59.000Z","updated":"2020-03-16T10:41:30.000Z","comments":false,"path":"lab/index.html","permalink":"https://lingdas.github.io/lab/index.html","excerpt":"","text":"sakuraä¸»é¢˜balabala","keywords":"Labå®éªŒå®¤"},{"title":"music","date":"2018-12-20T15:14:28.000Z","updated":"2020-03-16T10:41:30.000Z","comments":false,"path":"links/index.html","permalink":"https://lingdas.github.io/links/index.html","excerpt":"","text":"","keywords":"å–œæ¬¢çš„éŸ³ä¹"},{"title":"tags","date":"2018-12-12T14:14:16.000Z","updated":"2020-03-16T10:41:30.000Z","comments":true,"path":"tags/index.html","permalink":"https://lingdas.github.io/tags/index.html","excerpt":"","text":""},{"title":"music","date":"2018-12-20T15:14:28.000Z","updated":"2020-03-16T10:41:30.000Z","comments":false,"path":"music/index.html","permalink":"https://lingdas.github.io/music/index.html","excerpt":"","text":"","keywords":"å–œæ¬¢çš„éŸ³ä¹"},{"title":"rss","date":"2018-12-20T15:09:03.000Z","updated":"2020-03-16T10:41:30.000Z","comments":true,"path":"rss/index.html","permalink":"https://lingdas.github.io/rss/index.html","excerpt":"","text":""},{"title":"theme-sakura","date":"2019-01-04T14:53:25.000Z","updated":"2020-03-16T10:41:30.000Z","comments":false,"path":"theme-sakura/index.html","permalink":"https://lingdas.github.io/theme-sakura/index.html","excerpt":"","text":"Hexoä¸»é¢˜Sakuraä¿®æ”¹è‡ªWordPressä¸»é¢˜Sakuraï¼Œæ„Ÿè°¢åŸä½œè€…Mashiro","keywords":"Hexo ä¸»é¢˜ Sakura ğŸŒ¸"},{"title":"video","date":"2018-12-20T15:14:38.000Z","updated":"2020-03-16T10:41:30.000Z","comments":false,"path":"video/index.html","permalink":"https://lingdas.github.io/video/index.html","excerpt":"","text":"var videos = [ { img: 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: 'æ”¾é€æ—¶é—´: 2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' }, { img : 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: '2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' } ] .should-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:95%;}.should-ellipsis-full{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;}.should-ellipsis i{position:absolute;right:24px;}.grey-text{color:#9e9e9e !important}.grey-text.text-darken-4{color:#212121 !important}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}img{border-style:none}progress{display:inline-block;vertical-align:baseline}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}*,*:before,*:after{-webkit-box-sizing:inherit;box-sizing:inherit}ul:not(.browser-default){padding-left:0;list-style-type:none}ul:not(.browser-default)>li{list-style-type:none}.card{-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2);box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}.hoverable{-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s}.hoverable:hover{-webkit-box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}i{line-height:inherit}i.right{float:right;margin-left:15px}.bangumi .right{float:right !important}.material-icons{text-rendering:optimizeLegibility;-webkit-font-feature-settings:'liga';-moz-font-feature-settings:'liga';font-feature-settings:'liga'}.row{margin-left:auto;margin-right:auto;margin-bottom:20px}.row:after{content:\"\";display:table;clear:both}.row .col{float:left;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 .75rem;min-height:1px}.row .col.s12{width:100%;margin-left:auto;left:auto;right:auto}@media only screen and (min-width:601px){.row .col.m6{width:50%;margin-left:auto;left:auto;right:auto}}html{line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;font-weight:normal;color:rgba(0,0,0,0.87)}@media only screen and (min-width:0){html{font-size:14px}}@media only screen and (min-width:992px){html{font-size:14.5px}}@media only screen and (min-width:1200px){html{font-size:15px}}.card{position:relative;margin:.5rem 0 1rem 0;background-color:#fff;-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s;border-radius:2px}.card .card-title{font-size:24px;font-weight:300}.card .card-title.activator{cursor:pointer}.card .card-image{position:relative}.card .card-image img{display:block;border-radius:2px 2px 0 0;position:relative;left:0;right:0;top:0;bottom:0;width:100%}.card .card-content{padding:24px;border-radius:0 0 2px 2px}.card .card-content p{margin:0}.card .card-content .card-title{display:block;line-height:32px;margin-bottom:8px}.card .card-content .card-title i{line-height:32px}.card .card-reveal{padding:24px;position:absolute;background-color:#fff;width:100%;overflow-y:auto;left:0;top:100%;height:100%;z-index:3;display:none}.card .card-reveal .card-title{cursor:pointer;display:block}.waves-effect{position:relative;cursor:pointer;display:inline-block;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;vertical-align:middle;z-index:1;-webkit-transition:.3s ease-out;transition:.3s ease-out}.waves-effect img{position:relative;z-index:-1}.waves-block{display:block}::-webkit-input-placeholder{color:#d1d1d1}::-moz-placeholder{color:#d1d1d1}:-ms-input-placeholder{color:#d1d1d1}::-ms-input-placeholder{color:#d1d1d1}[type=\"radio\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"radio\"]:not(:checked)+span{position:relative;padding-left:35px;cursor:pointer;display:inline-block;height:25px;line-height:25px;font-size:1rem;-webkit-transition:.28s ease;transition:.28s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border-radius:50%}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border:2px solid #5a5a5a}[type=\"radio\"]:not(:checked)+span:after{-webkit-transform:scale(0);transform:scale(0)}[type=\"checkbox\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"checkbox\"]:not(:checked):disabled+span:not(.lever):before{border:none;background-color:rgba(0,0,0,0.42)}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):before{width:0;height:0;border:3px solid transparent;left:6px;top:10px;-webkit-transform:rotateZ(37deg);transform:rotateZ(37deg);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):after{height:20px;width:20px;background-color:transparent;border:2px solid #5a5a5a;top:0px;z-index:0}input[type=checkbox]:not(:disabled) ~ .lever:active:before,input[type=checkbox]:not(:disabled).tabbed:focus ~ .lever::before{-webkit-transform:scale(2.4);transform:scale(2.4);background-color:rgba(0,0,0,0.08)}input[type=range].focused:focus:not(.active)::-webkit-slider-thumb{-webkit-box-shadow:0 0 0 10px rgba(38,166,154,0.26);box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-moz-range-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-ms-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)} ç•ªç»„è®¡åˆ’ è¿™é‡Œå°†æ˜¯æ°¸è¿œçš„å›å¿† window.onload = function(){ videos.forEach(function(video, i){ $('#rootRow').append(` ${video.title} ${video.jp} ${video.status} ${video.title} ${video.jp} æ”¾é€æ—¶é—´: ${video.time} ${video.desc} ${video.status} `) }) }","keywords":"Bç«™"}],"posts":[{"title":"springmvc_03","slug":"springmvc-day03","date":"2021-06-15T04:02:56.000Z","updated":"2021-06-16T06:47:42.000Z","comments":true,"path":"2021/06/15/springmvc-day03/","link":"","permalink":"https://lingdas.github.io/2021/06/15/springmvc-day03/","excerpt":"","text":"SpringMVCçš„æ–‡ä»¶ä¸Šä¼ 1-SpringMVCçš„è¯·æ±‚-æ–‡ä»¶ä¸Šä¼ -å®¢æˆ·ç«¯è¡¨å•å®ç°(åº”ç”¨)æ–‡ä»¶ä¸Šä¼ å®¢æˆ·ç«¯è¡¨å•éœ€è¦æ»¡è¶³ï¼š è¡¨å•é¡¹type=â€œfileâ€ è¡¨å•çš„æäº¤æ–¹å¼æ˜¯post è¡¨å•çš„enctypeå±æ€§æ˜¯å¤šéƒ¨åˆ†è¡¨å•å½¢å¼ï¼ŒåŠenctype=â€œmultipart/form-dataâ€ &lt;form action=&quot;${pageContext.request.contextPath}/user/quick22&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; åç§°&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br/&gt; æ–‡ä»¶1&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;&gt;&lt;br/&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt; &lt;/form&gt; 2-SpringMVCçš„è¯·æ±‚-æ–‡ä»¶ä¸Šä¼ -æ–‡ä»¶ä¸Šä¼ çš„åŸç†(ç†è§£) 3-SpringMVCçš„è¯·æ±‚-æ–‡ä»¶ä¸Šä¼ -å•æ–‡ä»¶ä¸Šä¼ çš„ä»£ç å®ç°1(åº”ç”¨)æ·»åŠ ä¾èµ– &lt;dependency&gt; &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; &lt;version&gt;1.3.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;commons-io&lt;/groupId&gt; &lt;artifactId&gt;commons-io&lt;/artifactId&gt; &lt;version&gt;2.3&lt;/version&gt; &lt;/dependency&gt; é…ç½®å¤šåª’ä½“è§£æå™¨ &lt;!--é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨--&gt; &lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt; &lt;property name=&quot;defaultEncoding&quot; value=&quot;UYF-8&quot;/&gt; &lt;property name=&quot;maxUploadSize&quot; value=&quot;500000&quot;/&gt; &lt;/bean&gt; åå°ç¨‹åº @RequestMapping(value=&quot;/quick22&quot;) @ResponseBody public void save22(String username, MultipartFile uploadFile) throws IOException { System.out.println(username); System.out.println(uploadFile); } 4-SpringMVCçš„è¯·æ±‚-æ–‡ä»¶ä¸Šä¼ -å•æ–‡ä»¶ä¸Šä¼ çš„ä»£ç å®ç°2(åº”ç”¨)å®Œæˆæ–‡ä»¶ä¸Šä¼  @RequestMapping(value=&quot;/quick22&quot;) @ResponseBody public void save22(String username, MultipartFile uploadFile) throws IOException { System.out.println(username); //è·å¾—ä¸Šä¼ æ–‡ä»¶çš„åç§° String originalFilename = uploadFile.getOriginalFilename(); uploadFile.transferTo(new File(&quot;C:\\\\upload\\\\&quot;+originalFilename)); } 5-SpringMVCçš„è¯·æ±‚-æ–‡ä»¶ä¸Šä¼ -å¤šæ–‡ä»¶ä¸Šä¼ çš„ä»£ç å®ç°(åº”ç”¨)å¤šæ–‡ä»¶ä¸Šä¼ ï¼Œåªéœ€è¦å°†é¡µé¢ä¿®æ”¹ä¸ºå¤šä¸ªæ–‡ä»¶ä¸Šä¼ é¡¹ï¼Œå°†æ–¹æ³•å‚æ•°MultipartFileç±»å‹ä¿®æ”¹ä¸ºMultipartFile[]å³å¯ &lt;form action=&quot;${pageContext.request.contextPath}/user/quick23&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; åç§°&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br/&gt; æ–‡ä»¶1&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;&gt;&lt;br/&gt; æ–‡ä»¶2&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;&gt;&lt;br/&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt; &lt;/form&gt; @RequestMapping(value=&quot;/quick23&quot;) @ResponseBody public void save23(String username, MultipartFile[] uploadFile) throws IOException { System.out.println(username); for (MultipartFile multipartFile : uploadFile) { String originalFilename = multipartFile.getOriginalFilename(); multipartFile.transferTo(new File(&quot;C:\\\\upload\\\\&quot;+originalFilename)); } } 6-SpringMVCçš„è¯·æ±‚-çŸ¥è¯†è¦ç‚¹(ç†è§£ï¼Œè®°å¿†) SpringMVCçš„æ‹¦æˆªå™¨01-SpringMVCæ‹¦æˆªå™¨-æ‹¦æˆªå™¨çš„ä½œç”¨(ç†è§£)Spring MVC çš„æ‹¦æˆªå™¨ç±»ä¼¼äº Servlet å¼€å‘ä¸­çš„è¿‡æ»¤å™¨ Filterï¼Œç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚ å°†æ‹¦æˆªå™¨æŒ‰ä¸€å®šçš„é¡ºåºè”ç»“æˆä¸€æ¡é“¾ï¼Œè¿™æ¡é“¾ç§°ä¸ºæ‹¦æˆªå™¨é“¾ï¼ˆInterceptorChainï¼‰ã€‚åœ¨è®¿é—®è¢«æ‹¦æˆªçš„æ–¹æ³•æˆ–å­—æ®µæ—¶ï¼Œæ‹¦æˆªå™¨é“¾ä¸­çš„æ‹¦æˆªå™¨å°±ä¼šæŒ‰å…¶ä¹‹å‰å®šä¹‰çš„é¡ºåºè¢«è°ƒç”¨ã€‚æ‹¦æˆªå™¨ä¹Ÿæ˜¯AOPæ€æƒ³çš„å…·ä½“å®ç°ã€‚ 02-SpringMVCæ‹¦æˆªå™¨-interceptorå’ŒfilteråŒºåˆ«(ç†è§£ï¼Œè®°å¿†)å…³äºinterceptorå’Œfilterçš„åŒºåˆ«ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 03-SpringMVCæ‹¦æˆªå™¨-å¿«é€Ÿå…¥é—¨(åº”ç”¨)è‡ªå®šä¹‰æ‹¦æˆªå™¨å¾ˆç®€å•ï¼Œåªæœ‰å¦‚ä¸‹ä¸‰æ­¥ï¼š â‘ åˆ›å»ºæ‹¦æˆªå™¨ç±»å®ç°HandlerInterceptoræ¥å£ â‘¡é…ç½®æ‹¦æˆªå™¨ â‘¢æµ‹è¯•æ‹¦æˆªå™¨çš„æ‹¦æˆªæ•ˆæœ ç¼–å†™æ‹¦æˆªå™¨ï¼š public class MyInterceptor1 implements HandlerInterceptor { //åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ æ‰§è¡Œ public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws ServletException, IOException { System.out.println(&quot;preHandle.....&quot;); } //åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å è§†å›¾å¯¹è±¡è¿”å›ä¹‹å‰æ‰§è¡Œ public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) { System.out.println(&quot;postHandle...&quot;); } //åœ¨æµç¨‹éƒ½æ‰§è¡Œå®Œæ¯•å æ‰§è¡Œ public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) { System.out.println(&quot;afterCompletion....&quot;); } } é…ç½®ï¼šåœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­é…ç½® &lt;!--é…ç½®æ‹¦æˆªå™¨--&gt; &lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;!--å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;bean class=&quot;com.itheima.interceptor.MyInterceptor1&quot;/&gt; &lt;/mvc:interceptor&gt; &lt;/mvc:interceptors&gt; ç¼–å†™æµ‹è¯•ç¨‹åºæµ‹è¯•ï¼š ç¼–å†™Controller,å‘è¯·æ±‚åˆ°controller,è·³è½¬é¡µé¢ @Controller public class TargetController { @RequestMapping(&quot;/target&quot;) public ModelAndView show(){ System.out.println(&quot;ç›®æ ‡èµ„æºæ‰§è¡Œ......&quot;); ModelAndView modelAndView = new ModelAndView(); modelAndView.addObject(&quot;name&quot;,&quot;itcast&quot;); modelAndView.setViewName(&quot;index&quot;); return modelAndView; } } é¡µé¢ &lt;html&gt; &lt;body&gt; &lt;h2&gt;Hello World! ${name}&lt;/h2&gt; &lt;/body&gt; &lt;/html&gt; 04-SpringMVCæ‹¦æˆªå™¨-å¿«é€Ÿå…¥é—¨è¯¦è§£(åº”ç”¨)æ‹¦æˆªå™¨åœ¨é¢„å¤„ç†åä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ‰§è¡Œç›®æ ‡èµ„æºï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¸æ‰§è¡Œç›®æ ‡èµ„æºï¼Œä»¥åŠåœ¨æœ‰å¤šä¸ªæ‹¦æˆªå™¨çš„æƒ…å†µä¸‹æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ? å†ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨2ï¼Œ public class MyInterceptor2 implements HandlerInterceptor { //åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ æ‰§è¡Œ public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws ServletException, IOException { System.out.println(&quot;preHandle22222.....&quot;); return true; } //åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å è§†å›¾å¯¹è±¡è¿”å›ä¹‹å‰æ‰§è¡Œ public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) { System.out.println(&quot;postHandle2222...&quot;); } //åœ¨æµç¨‹éƒ½æ‰§è¡Œå®Œæ¯•å æ‰§è¡Œ public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) { System.out.println(&quot;afterCompletion2222....&quot;); } } é…ç½®æ‹¦æˆªå™¨2 &lt;!--é…ç½®æ‹¦æˆªå™¨--&gt; &lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;!--å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;bean class=&quot;com.itheima.interceptor.MyInterceptor2&quot;/&gt; &lt;/mvc:interceptor&gt; &lt;mvc:interceptor&gt; &lt;!--å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;bean class=&quot;com.itheima.interceptor.MyInterceptor1&quot;/&gt; &lt;/mvc:interceptor&gt; &lt;/mvc:interceptors&gt; ç»“è®ºï¼š å½“æ‹¦æˆªå™¨çš„preHandleæ–¹æ³•è¿”å›trueåˆ™ä¼šæ‰§è¡Œç›®æ ‡èµ„æºï¼Œå¦‚æœè¿”å›falseåˆ™ä¸æ‰§è¡Œç›®æ ‡èµ„æº å¤šä¸ªæ‹¦æˆªå™¨æƒ…å†µä¸‹ï¼Œé…ç½®åœ¨å‰çš„å…ˆæ‰§è¡Œï¼Œé…ç½®åœ¨åçš„åæ‰§è¡Œ æ‹¦æˆªå™¨ä¸­çš„æ–¹æ³•æ‰§è¡Œé¡ºåºæ˜¯ï¼špreHandlerâ€”â€”-ç›®æ ‡èµ„æºâ€”-postHandleâ€”- afterCompletion 05-SpringMVCæ‹¦æˆªå™¨-çŸ¥è¯†å°ç»“(è®°å¿†)æ‹¦æˆªå™¨ä¸­çš„æ–¹æ³•è¯´æ˜å¦‚ä¸‹ 06-SpringMVCæ‹¦æˆªå™¨-ç”¨æˆ·ç™»å½•æƒé™æ§åˆ¶åˆ†æ(ç†è§£)åœ¨day06-Springç»ƒä¹ æ¡ˆä¾‹çš„åŸºç¡€ä¹‹ä¸Šï¼šç”¨æˆ·æ²¡æœ‰ç™»å½•çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½å¯¹åå°èœå•è¿›è¡Œè®¿é—®æ“ä½œï¼Œç‚¹å‡»èœå•è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œåªæœ‰ç”¨æˆ·ç™»å½•æˆåŠŸåæ‰èƒ½è¿›è¡Œåå°åŠŸèƒ½çš„æ“ä½œ éœ€æ±‚å›¾ï¼š 07-SpringMVCæ‹¦æˆªå™¨-ç”¨æˆ·ç™»å½•æƒé™æ§åˆ¶ä»£ç å®ç°1(åº”ç”¨)åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½• æœ¬è´¨ï¼šåˆ¤æ–­sessionä¸­æœ‰æ²¡æœ‰userï¼Œå¦‚æœæ²¡æœ‰ç™»é™†åˆ™å…ˆå»ç™»é™†ï¼Œå¦‚æœå·²ç»ç™»é™†åˆ™ç›´æ¥æ”¾è¡Œè®¿é—®ç›®æ ‡èµ„æº å…ˆç¼–å†™æ‹¦æˆªå™¨å¦‚ä¸‹ï¼š public class PrivilegeInterceptor implements HandlerInterceptor { public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws IOException { //é€»è¾‘ï¼šåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½• æœ¬è´¨ï¼šåˆ¤æ–­sessionä¸­æœ‰æ²¡æœ‰user HttpSession session = request.getSession(); User user = (User) session.getAttribute(&quot;user&quot;); if(user==null){ //æ²¡æœ‰ç™»å½• response.sendRedirect(request.getContextPath()+&quot;/login.jsp&quot;); return false; } //æ”¾è¡Œ è®¿é—®ç›®æ ‡èµ„æº return true; } } ç„¶åé…ç½®è¯¥æ‹¦æˆªå™¨ï¼šæ‰¾åˆ°é¡¹ç›®æ¡ˆä¾‹çš„spring-mvc.xmlï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š &lt;!--é…ç½®æƒé™æ‹¦æˆªå™¨--&gt; &lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;!--é…ç½®å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;bean class=&quot;com.itheima.interceptor.PrivilegeInterceptor&quot;/&gt; &lt;/mvc:interceptor&gt; &lt;/mvc:interceptors&gt; 08-SpringMVCæ‹¦æˆªå™¨-ç”¨æˆ·ç™»å½•æƒé™æ§åˆ¶ä»£ç å®ç°2(åº”ç”¨)åœ¨ç™»é™†é¡µé¢è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œç‚¹å‡»ç™»é™†ï¼Œé€šè¿‡ç”¨æˆ·åå¯†ç è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœç™»é™†æˆåŠŸï¼Œåˆ™å°†ç”¨æˆ·ä¿¡æ¯å®ä½“å­˜å…¥sessionï¼Œç„¶åè·³è½¬åˆ°é¦–é¡µï¼Œå¦‚æœç™»é™†å¤±è´¥åˆ™ç»§ç»­å›åˆ°ç™»é™†é¡µé¢ åœ¨UserControllerä¸­ç¼–å†™ç™»é™†é€»è¾‘ @RequestMapping(&quot;/login&quot;) public String login(String username,String password,HttpSession session){ User user = userService.login(username,password); if(user!=null){ //ç™»å½•æˆåŠŸ å°†userå­˜å‚¨åˆ°session session.setAttribute(&quot;user&quot;,user); return &quot;redirect:/index.jsp&quot;; } return &quot;redirect:/login.jsp&quot;; } serviceå±‚ä»£ç å¦‚ä¸‹ï¼š //serviceå±‚ public User login(String username, String password) { User user = userDao.findByUsernameAndPassword(username,password); return user; } daoå±‚ä»£ç å¦‚ä¸‹ï¼š //daoå±‚ public User findByUsernameAndPassword(String username, String password) throws EmptyResultDataAccessException{ User user = jdbcTemplate.queryForObject(&quot;select * from sys_user where username=? and password=?&quot;, new BeanPropertyRowMapper&lt;User&gt;(User.class), username, password); return user; } æ­¤æ—¶ä»ç„¶ç™»é™†ä¸ä¸Šï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å°†ç™»é™†è¯·æ±‚urlè®©æ‹¦æˆªå™¨æ”¾è¡Œ,æ·»åŠ èµ„æºæ’é™¤çš„é…ç½® &lt;!--é…ç½®æƒé™æ‹¦æˆªå™¨--&gt; &lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;!--é…ç½®å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;!--é…ç½®å“ªäº›èµ„æºæ’é™¤æ‹¦æˆªæ“ä½œ--&gt; &lt;mvc:exclude-mapping path=&quot;/user/login&quot;/&gt; &lt;bean class=&quot;com.itheima.interceptor.PrivilegeInterceptor&quot;/&gt; &lt;/mvc:interceptor&gt; &lt;/mvc:interceptors&gt; 09-SpringMVCæ‹¦æˆªå™¨-ç”¨æˆ·ç™»å½•æƒé™æ§åˆ¶ä»£ç å®ç°3(åº”ç”¨)JdbcTemplate.queryForObjectå¯¹è±¡å¦‚æœæŸ¥è¯¢ä¸åˆ°æ•°æ®ä¼šæŠ›å¼‚å¸¸ï¼Œå¯¼è‡´ç¨‹åºæ— æ³•è¾¾åˆ°é¢„æœŸæ•ˆæœï¼Œå¦‚ä½•æ¥è§£å†³è¯¥é—®é¢˜ï¼Ÿ åœ¨ä¸šåŠ¡å±‚å¤„ç†æ¥è‡ªdaoå±‚çš„å¼‚å¸¸ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸serviceå±‚è¿”å›null,è€Œä¸æ˜¯å°†å¼‚å¸¸æŠ›ç»™controller å› æ­¤æ”¹é€ ç™»é™†çš„ä¸šåŠ¡å±‚ä»£ç ,æ·»åŠ å¼‚å¸¸çš„æ§åˆ¶ public User login(String username, String password) { try { User user = userDao.findByUsernameAndPassword(username,password); return user; }catch (EmptyResultDataAccessException e){ return null; } } 1. SpringMVCå¼‚å¸¸å¤„ç†æœºåˆ¶1.1 å¼‚å¸¸å¤„ç†çš„æ€è·¯ç³»ç»Ÿä¸­å¼‚å¸¸åŒ…æ‹¬ä¸¤ç±»ï¼šé¢„æœŸå¼‚å¸¸å’Œè¿è¡Œæ—¶å¼‚å¸¸RuntimeExceptionï¼Œå‰è€…é€šè¿‡æ•è·å¼‚å¸¸ä»è€Œè·å–å¼‚å¸¸ä¿¡æ¯ï¼Œåè€…ä¸»è¦é€šè¿‡è§„èŒƒä»£ç å¼€å‘ã€æµ‹è¯•ç­‰æ‰‹æ®µå‡å°‘è¿è¡Œæ—¶å¼‚å¸¸çš„å‘ç”Ÿã€‚ ç³»ç»Ÿçš„Daoã€Serviceã€Controllerå‡ºç°éƒ½é€šè¿‡throws Exceptionå‘ä¸ŠæŠ›å‡ºï¼Œæœ€åç”±SpringMVCå‰ç«¯æ§åˆ¶å™¨äº¤ç”±å¼‚å¸¸å¤„ç†å™¨è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå¦‚ä¸‹å›¾ï¼š 1.2 å¼‚å¸¸å¤„ç†ä¸¤ç§æ–¹å¼â‘  ä½¿ç”¨Spring MVCæä¾›çš„ç®€å•å¼‚å¸¸å¤„ç†å™¨SimpleMappingExceptionResolver â‘¡ å®ç°Springçš„å¼‚å¸¸å¤„ç†æ¥å£HandlerExceptionResolver è‡ªå®šä¹‰è‡ªå·±çš„å¼‚å¸¸å¤„ç†å™¨ 1.3 ç®€å•å¼‚å¸¸å¤„ç†å™¨SimpleMappingExceptionResolverSpringMVCå·²ç»å®šä¹‰å¥½äº†è¯¥ç±»å‹è½¬æ¢å™¨ï¼Œåœ¨ä½¿ç”¨æ—¶å¯ä»¥æ ¹æ®é¡¹ç›®æƒ…å†µè¿›è¡Œç›¸åº”å¼‚å¸¸ä¸è§†å›¾çš„æ˜ å°„é…ç½® &lt;!--é…ç½®ç®€å•æ˜ å°„å¼‚å¸¸å¤„ç†å™¨--&gt; &lt;bean class=â€œorg.springframework.web.servlet.handler.SimpleMappingExceptionResolverâ€&gt; &lt;property name=â€œdefaultErrorViewâ€ value=â€œerrorâ€/&gt; é»˜è®¤é”™è¯¯è§†å›¾ &lt;property name=â€œexceptionMappingsâ€&gt; &lt;map&gt; å¼‚å¸¸ç±»å‹ é”™è¯¯è§†å›¾ &lt;entry key=&quot;com.itheima.exception.MyException&quot; value=&quot;error&quot;/&gt; &lt;entry key=&quot;java.lang.ClassCastException&quot; value=&quot;error&quot;/&gt; &lt;/map&gt; &lt;/property&gt; &lt;/bean&gt; 1.4 è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†æ­¥éª¤â‘ åˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»å®ç°HandlerExceptionResolver public class MyExceptionResolver implements HandlerExceptionResolver { @Override public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) { //å¤„ç†å¼‚å¸¸çš„ä»£ç å®ç° //åˆ›å»ºModelAndViewå¯¹è±¡ ModelAndView modelAndView = new ModelAndView(); modelAndView.setViewName(&quot;exceptionPage&quot;); return modelAndView; } } â‘¡é…ç½®å¼‚å¸¸å¤„ç†å™¨ &lt;bean id=&quot;exceptionResolver&quot; class=&quot;com.itheima.exception.MyExceptionResolver&quot;/&gt; â‘¢ç¼–å†™å¼‚å¸¸é¡µé¢ &lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; è¿™æ˜¯ä¸€ä¸ªæœ€ç»ˆå¼‚å¸¸çš„æ˜¾ç¤ºé¡µé¢ &lt;/body&gt; &lt;/html&gt; â‘£æµ‹è¯•å¼‚å¸¸è·³è½¬ @RequestMapping(&quot;/quick22&quot;) @ResponseBody public void quickMethod22() throws IOException, ParseException { SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); simpleDateFormat.parse(&quot;abcde&quot;); } 1.5 çŸ¥è¯†è¦ç‚¹å¼‚å¸¸å¤„ç†æ–¹å¼ é…ç½®ç®€å•å¼‚å¸¸å¤„ç†å™¨SimpleMappingExceptionResolver è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨ è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†æ­¥éª¤ â‘ åˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»å®ç°HandlerExceptionResolver â‘¡é…ç½®å¼‚å¸¸å¤„ç†å™¨ â‘¢ç¼–å†™å¼‚å¸¸é¡µé¢ â‘£æµ‹è¯•å¼‚å¸¸è·³è½¬ ###","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"https://lingdas.github.io/tags/springboot/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}]},{"title":"Springä¸Webç¯å¢ƒé›†æˆ","slug":"Springä¸Webç¯å¢ƒé›†æˆ","date":"2021-06-15T00:41:08.000Z","updated":"2021-06-16T06:39:56.000Z","comments":true,"path":"2021/06/15/Springä¸Webç¯å¢ƒé›†æˆ/","link":"","permalink":"https://lingdas.github.io/2021/06/15/Springä¸Webç¯å¢ƒé›†æˆ/","excerpt":"","text":"1. Springä¸Webç¯å¢ƒé›†æˆ1.1 ApplicationContextåº”ç”¨ä¸Šä¸‹æ–‡è·å–æ–¹å¼åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯é€šè¿‡new ClasspathXmlApplicationContext(springé…ç½®æ–‡ä»¶) æ–¹å¼è·å–çš„ï¼Œä½†æ˜¯æ¯æ¬¡ä»å®¹å™¨ä¸­è·å¾—Beanæ—¶éƒ½è¦ç¼–å†™new ClasspathXmlApplicationContext(springé…ç½®æ–‡ä»¶) ï¼Œè¿™æ ·çš„å¼Šç«¯æ˜¯é…ç½®æ–‡ä»¶åŠ è½½å¤šæ¬¡ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡åˆ›å»ºå¤šæ¬¡ã€‚ åœ¨Webé¡¹ç›®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ServletContextListenerç›‘å¬Webåº”ç”¨çš„å¯åŠ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Webåº”ç”¨å¯åŠ¨æ—¶ï¼Œå°±åŠ è½½Springçš„é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ApplicationContextï¼Œåœ¨å°†å…¶å­˜å‚¨åˆ°æœ€å¤§çš„åŸŸservletContextåŸŸä¸­ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä»»æ„ä½ç½®ä»åŸŸä¸­è·å¾—åº”ç”¨ä¸Šä¸‹æ–‡ApplicationContextå¯¹è±¡äº†ã€‚ 1.2 Springæä¾›è·å–åº”ç”¨ä¸Šä¸‹æ–‡çš„å·¥å…·ä¸Šé¢çš„åˆ†æä¸ç”¨æ‰‹åŠ¨å®ç°ï¼ŒSpringæä¾›äº†ä¸€ä¸ªç›‘å¬å™¨ContextLoaderListenerå°±æ˜¯å¯¹ä¸Šè¿°åŠŸèƒ½çš„å°è£…ï¼Œè¯¥ç›‘å¬å™¨å†…éƒ¨åŠ è½½Springé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¹¶å­˜å‚¨åˆ°ServletContextåŸŸä¸­ï¼Œæä¾›äº†ä¸€ä¸ªå®¢æˆ·ç«¯å·¥å…·WebApplicationContextUtilsä¾›ä½¿ç”¨è€…è·å¾—åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦åšçš„åªæœ‰ä¸¤ä»¶äº‹ï¼š â‘ åœ¨web.xmlä¸­é…ç½®ContextLoaderListenerç›‘å¬å™¨ï¼ˆå¯¼å…¥spring-webåæ ‡ï¼‰ â‘¡ä½¿ç”¨WebApplicationContextUtilsè·å¾—åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ApplicationContext 1.3 å¯¼å…¥Springé›†æˆwebçš„åæ ‡&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; 1.4 é…ç½®ContextLoaderListenerç›‘å¬å™¨&lt;!--å…¨å±€å‚æ•°--&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;!--Springçš„ç›‘å¬å™¨--&gt; &lt;listener&gt; &lt;listener-class&gt; org.springframework.web.context.ContextLoaderListener &lt;/listener-class&gt; &lt;/listener&gt; 1.5 é€šè¿‡å·¥å…·è·å¾—åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ApplicationContext applicationContext = WebApplicationContextUtils.getWebApplicationContext(servletContext); Object obj = applicationContext.getBean(&quot;id&quot;); çŸ¥è¯†è¦ç‚¹ Springé›†æˆwebç¯å¢ƒæ­¥éª¤ â€‹ â‘ é…ç½®ContextLoaderListenerç›‘å¬å™¨ â€‹ â‘¡ä½¿ç”¨WebApplicationContextUtilsè·å¾—åº”ç”¨ä¸Šä¸‹æ–‡ 2. SpringMVCçš„ç®€ä»‹2.1 SpringMVCæ¦‚è¿°SpringMVC æ˜¯ä¸€ç§åŸºäº Java çš„å®ç° MVC è®¾è®¡æ¨¡å‹çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§ Web æ¡†æ¶ï¼Œå±äºSpringFrameWork çš„åç»­äº§å“ï¼Œå·²ç»èåˆåœ¨ Spring Web Flow ä¸­ã€‚ SpringMVC å·²ç»æˆä¸ºç›®å‰æœ€ä¸»æµçš„MVCæ¡†æ¶ä¹‹ä¸€ï¼Œå¹¶ä¸”éšç€Spring3.0 çš„å‘å¸ƒï¼Œå…¨é¢è¶…è¶Š Struts2ï¼Œæˆä¸ºæœ€ä¼˜ç§€çš„ MVC æ¡†æ¶ã€‚å®ƒé€šè¿‡ä¸€å¥—æ³¨è§£ï¼Œè®©ä¸€ä¸ªç®€å•çš„ Java ç±»æˆä¸ºå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨ï¼Œè€Œæ— é¡»å®ç°ä»»ä½•æ¥å£ã€‚åŒæ—¶å®ƒè¿˜æ”¯æŒ RESTful ç¼–ç¨‹é£æ ¼çš„è¯·æ±‚ã€‚ 2.3 SpringMVCå¿«é€Ÿå…¥é—¨éœ€æ±‚ï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯æ¥æ”¶è¯·æ±‚ï¼Œæ‰§è¡Œé€»è¾‘å¹¶è¿›è¡Œè§†å›¾è·³è½¬ã€‚ å¼€å‘æ­¥éª¤ â‘ å¯¼å…¥SpringMVCç›¸å…³åæ ‡ â‘¡é…ç½®SpringMVCæ ¸å¿ƒæ§åˆ¶å™¨DispathcerServlet â‘¢åˆ›å»ºControllerç±»å’Œè§†å›¾é¡µé¢ â‘£ä½¿ç”¨æ³¨è§£é…ç½®Controllerç±»ä¸­ä¸šåŠ¡æ–¹æ³•çš„æ˜ å°„åœ°å€ â‘¤é…ç½®SpringMVCæ ¸å¿ƒæ–‡ä»¶ spring-mvc.xml â‘¥å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æµ‹è¯• ä»£ç å®ç° â‘ å¯¼å…¥Springå’ŒSpringMVCçš„åæ ‡ã€å¯¼å…¥Servletå’ŒJspçš„åæ ‡ &lt;!--Springåæ ‡--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!--SpringMVCåæ ‡--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!--Servletåæ ‡--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt; &lt;/dependency&gt; &lt;!--Jspåæ ‡--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;version&gt;2.0&lt;/version&gt; &lt;/dependency&gt; â‘¡åœ¨web.xmlé…ç½®SpringMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨ &lt;servlet&gt; &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; â‘¢åˆ›å»ºControllerå’Œä¸šåŠ¡æ–¹æ³• public class QuickController { public String quickMethod(){ System.out.println(&quot;quickMethod running.....&quot;); return &quot;index&quot;; } } â‘¢åˆ›å»ºè§†å›¾é¡µé¢index.jsp &lt;html&gt; &lt;body&gt; &lt;h2&gt;Hello SpringMVC!&lt;/h2&gt; &lt;/body&gt; &lt;/html&gt; â‘£é…ç½®æ³¨è§£ @Controller public class QuickController { @RequestMapping(&quot;/quick&quot;) public String quickMethod(){ System.out.println(&quot;quickMethod running.....&quot;); return &quot;index&quot;; } } â‘¤åˆ›å»ºspring-mvc.xml &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--é…ç½®æ³¨è§£æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.itheima&quot;/&gt; &lt;/beans&gt; â‘¥è®¿é—®æµ‹è¯•åœ°å€ http://localhost:8080/itheima_springmvc1/quick æ§åˆ¶å°æ‰“å° é¡µé¢æ˜¾ç¤º 2.3 SpringMVCæµç¨‹å›¾ç¤º 2.4 çŸ¥è¯†è¦ç‚¹SpringMVCçš„å¼€å‘æ­¥éª¤ â‘ å¯¼å…¥SpringMVCç›¸å…³åæ ‡ â‘¡é…ç½®SpringMVCæ ¸å¿ƒæ§åˆ¶å™¨DispathcerServlet â‘¢åˆ›å»ºControllerç±»å’Œè§†å›¾é¡µé¢ â‘£ä½¿ç”¨æ³¨è§£é…ç½®Controllerç±»ä¸­ä¸šåŠ¡æ–¹æ³•çš„æ˜ å°„åœ°å€ â‘¤é…ç½®SpringMVCæ ¸å¿ƒæ–‡ä»¶ spring-mvc.xml â‘¥å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æµ‹è¯• 3. SpringMVCçš„ç»„ä»¶è§£æ3.1 SpringMVCçš„æ‰§è¡Œæµç¨‹ â‘ ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletã€‚ â‘¡DispatcherServletæ”¶åˆ°è¯·æ±‚è°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ã€‚ â‘¢å¤„ç†å™¨æ˜ å°„å™¨æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨(å¯ä»¥æ ¹æ®xmlé…ç½®ã€æ³¨è§£è¿›è¡ŒæŸ¥æ‰¾)ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletã€‚ â‘£DispatcherServletè°ƒç”¨HandlerAdapterå¤„ç†å™¨é€‚é…å™¨ã€‚ â‘¤HandlerAdapterç»è¿‡é€‚é…è°ƒç”¨å…·ä½“çš„å¤„ç†å™¨(Controllerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ã€‚ â‘¥Controlleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewã€‚ â‘¦HandlerAdapterå°†controlleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServletã€‚ â‘§DispatcherServletå°†ModelAndViewä¼ ç»™ViewResloverè§†å›¾è§£æå™¨ã€‚ â‘¨ViewResloverè§£æåè¿”å›å…·ä½“Viewã€‚ â‘©DispatcherServletæ ¹æ®Viewè¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ã€‚DispatcherServletå“åº”ç”¨æˆ·ã€‚ 3.2 SpringMVCç»„ä»¶è§£æ å‰ç«¯æ§åˆ¶å™¨ï¼šDispatcherServlet â€‹ ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œå®ƒå°±ç›¸å½“äº MVC æ¨¡å¼ä¸­çš„ Cï¼ŒDispatcherServlet æ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”± å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ŒDispatcherServlet çš„å­˜åœ¨é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚ å¤„ç†å™¨æ˜ å°„å™¨ï¼šHandlerMapping â€‹ HandlerMapping è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚æ‰¾åˆ° Handler å³å¤„ç†å™¨ï¼ŒSpringMVC æä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„ æ˜ å°„æ–¹å¼ï¼Œä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚ å¤„ç†å™¨é€‚é…å™¨ï¼šHandlerAdapter â€‹ é€šè¿‡ HandlerAdapter å¯¹å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡æ‰©å±•é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹çš„å¤„ç† å™¨è¿›è¡Œæ‰§è¡Œã€‚ å¤„ç†å™¨ï¼šHandler â€‹ å®ƒå°±æ˜¯æˆ‘ä»¬å¼€å‘ä¸­è¦ç¼–å†™çš„å…·ä½“ä¸šåŠ¡æ§åˆ¶å™¨ã€‚ç”± DispatcherServlet æŠŠç”¨æˆ·è¯·æ±‚è½¬å‘åˆ° Handlerã€‚ç”± Handler å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚ è§†å›¾è§£æå™¨ï¼šView Resolver â€‹ View Resolver è´Ÿè´£å°†å¤„ç†ç»“æœç”Ÿæˆ View è§†å›¾ï¼ŒView Resolver é¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åï¼Œå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œå†ç”Ÿæˆ View è§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹ View è¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚ è§†å›¾ï¼šView â€‹ SpringMVC æ¡†æ¶æä¾›äº†å¾ˆå¤šçš„ View è§†å›¾ç±»å‹çš„æ”¯æŒï¼ŒåŒ…æ‹¬ï¼šjstlViewã€freemarkerViewã€pdfViewç­‰ã€‚æœ€å¸¸ç”¨çš„è§†å›¾å°±æ˜¯ jspã€‚ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢ 3.3 SpringMVCæ³¨è§£è§£æ@RequestMapping ä½œç”¨ï¼šç”¨äºå»ºç«‹è¯·æ±‚ URL å’Œå¤„ç†è¯·æ±‚æ–¹æ³•ä¹‹é—´çš„å¯¹åº”å…³ç³» ä½ç½®ï¼š â€‹ ç±»ä¸Šï¼Œè¯·æ±‚URL çš„ç¬¬ä¸€çº§è®¿é—®ç›®å½•ã€‚æ­¤å¤„ä¸å†™çš„è¯ï¼Œå°±ç›¸å½“äºåº”ç”¨çš„æ ¹ç›®å½• â€‹ æ–¹æ³•ä¸Šï¼Œè¯·æ±‚ URL çš„ç¬¬äºŒçº§è®¿é—®ç›®å½•ï¼Œä¸ç±»ä¸Šçš„ä½¿ç”¨@ReqquestMappingæ ‡æ³¨çš„ä¸€çº§ç›®å½•ä¸€èµ·ç»„æˆè®¿é—®è™šæ‹Ÿè·¯å¾„ å±æ€§ï¼š â€‹ valueï¼šç”¨äºæŒ‡å®šè¯·æ±‚çš„URLã€‚å®ƒå’Œpathå±æ€§çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ â€‹ methodï¼šç”¨äºæŒ‡å®šè¯·æ±‚çš„æ–¹å¼ â€‹ paramsï¼šç”¨äºæŒ‡å®šé™åˆ¶è¯·æ±‚å‚æ•°çš„æ¡ä»¶ã€‚å®ƒæ”¯æŒç®€å•çš„è¡¨è¾¾å¼ã€‚è¦æ±‚è¯·æ±‚å‚æ•°çš„keyå’Œvalueå¿…é¡»å’Œé…ç½®çš„ä¸€æ¨¡ä¸€æ · ä¾‹å¦‚ï¼š â€‹ params = {â€œaccountNameâ€}ï¼Œè¡¨ç¤ºè¯·æ±‚å‚æ•°å¿…é¡»æœ‰accountName â€‹ params = {â€œmoeny!100â€}ï¼Œè¡¨ç¤ºè¯·æ±‚å‚æ•°ä¸­moneyä¸èƒ½æ˜¯100 1.mvcå‘½åç©ºé—´å¼•å…¥ å‘½åç©ºé—´ï¼šxmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; çº¦æŸåœ°å€ï¼šhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd 2.ç»„ä»¶æ‰«æ SpringMVCåŸºäºSpringå®¹å™¨ï¼Œæ‰€ä»¥åœ¨è¿›è¡ŒSpringMVCæ“ä½œæ—¶ï¼Œéœ€è¦å°†Controllerå­˜å‚¨åˆ°Springå®¹å™¨ä¸­ï¼Œå¦‚æœä½¿ç”¨@Controlleræ³¨è§£æ ‡æ³¨çš„è¯ï¼Œå°±éœ€è¦ä½¿ç”¨&lt;context:component-scan base-package=â€œcom.itheima.controllerâ€/&gt;è¿›è¡Œç»„ä»¶æ‰«æã€‚ 3.4 SpringMVCçš„XMLé…ç½®è§£æSpringMVCæœ‰é»˜è®¤ç»„ä»¶é…ç½®ï¼Œé»˜è®¤ç»„ä»¶éƒ½æ˜¯DispatcherServlet.propertiesé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„ï¼Œè¯¥é…ç½®æ–‡ä»¶åœ°å€org/springframework/web/servlet/DispatcherServlet.propertiesï¼Œè¯¥æ–‡ä»¶ä¸­é…ç½®äº†é»˜è®¤çš„è§†å›¾è§£æå™¨ï¼Œå¦‚ä¸‹ï¼š org.springframework.web.servlet.ViewResolver=org.springframework.web.servlet.view.InternalResourceViewResolver ç¿»çœ‹è¯¥è§£æå™¨æºç ï¼Œå¯ä»¥çœ‹åˆ°è¯¥è§£æå™¨çš„é»˜è®¤è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š REDIRECT_URL_PREFIX = &quot;redirect:&quot; --é‡å®šå‘å‰ç¼€ FORWARD_URL_PREFIX = &quot;forward:&quot; --è½¬å‘å‰ç¼€ï¼ˆé»˜è®¤å€¼ï¼‰ prefix = &quot;&quot;; --è§†å›¾åç§°å‰ç¼€ suffix = &quot;&quot;; --è§†å›¾åç§°åç¼€ è§†å›¾è§£æå™¨ æˆ‘ä»¬å¯ä»¥é€šè¿‡å±æ€§æ³¨å…¥çš„æ–¹å¼ä¿®æ”¹è§†å›¾çš„çš„å‰åç¼€ &lt;!--é…ç½®å†…éƒ¨èµ„æºè§†å›¾è§£æå™¨--&gt; &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;&gt;&lt;/property&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt; &lt;/bean&gt; 3.5 çŸ¥è¯†è¦ç‚¹SpringMVCçš„ç›¸å…³ç»„ä»¶ å‰ç«¯æ§åˆ¶å™¨ï¼šDispatcherServlet å¤„ç†å™¨æ˜ å°„å™¨ï¼šHandlerMapping å¤„ç†å™¨é€‚é…å™¨ï¼šHandlerAdapter å¤„ç†å™¨ï¼šHandler è§†å›¾è§£æå™¨ï¼šView Resolver è§†å›¾ï¼šView SpringMVCçš„æ³¨è§£å’Œé…ç½® è¯·æ±‚æ˜ å°„æ³¨è§£ï¼š@RequestMapping è§†å›¾è§£æå™¨é…ç½®ï¼š REDIRECT_URL_PREFIX = â€œredirect:â€ FORWARD_URL_PREFIX = â€œforward:â€ prefix = â€œâ€; suffix = â€œâ€;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"https://lingdas.github.io/tags/springboot/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}]},{"title":"springmvc02","slug":"springmvc02","date":"2021-06-15T00:41:08.000Z","updated":"2021-06-16T06:40:02.000Z","comments":true,"path":"2021/06/15/springmvc02/","link":"","permalink":"https://lingdas.github.io/2021/06/15/springmvc02/","excerpt":"","text":"SpringMVCçš„è¯·æ±‚å’Œå“åº”SpringMVCçš„æ•°æ®å“åº”01-SpringMVCçš„æ•°æ®å“åº”-æ•°æ®å“åº”æ–¹å¼(ç†è§£)1) é¡µé¢è·³è½¬ ç›´æ¥è¿”å›å­—ç¬¦ä¸² é€šè¿‡ModelAndViewå¯¹è±¡è¿”å› 2ï¼‰ å›å†™æ•°æ® ç›´æ¥è¿”å›å­—ç¬¦ä¸² è¿”å›å¯¹è±¡æˆ–é›†åˆ 02-SpringMVCçš„æ•°æ®å“åº”-é¡µé¢è·³è½¬-è¿”å›å­—ç¬¦ä¸²å½¢å¼ï¼ˆåº”ç”¨ï¼‰ 03-SpringMVCçš„æ•°æ®å“åº”-é¡µé¢è·³è½¬-è¿”å›ModelAndViewå½¢å¼1(åº”ç”¨)åœ¨Controllerä¸­æ–¹æ³•è¿”å›ModelAndViewå¯¹è±¡ï¼Œå¹¶ä¸”è®¾ç½®è§†å›¾åç§° @RequestMapping(value=&quot;/quick2&quot;) public ModelAndView save2(){ /* Model:æ¨¡å‹ ä½œç”¨å°è£…æ•°æ® Viewï¼šè§†å›¾ ä½œç”¨å±•ç¤ºæ•°æ® */ ModelAndView modelAndView = new ModelAndView(); //è®¾ç½®æ¨¡å‹æ•°æ® modelAndView.addObject(&quot;username&quot;,&quot;itcast&quot;); //è®¾ç½®è§†å›¾åç§° modelAndView.setViewName(&quot;success&quot;); return modelAndView; } 04-SpringMVCçš„æ•°æ®å“åº”-é¡µé¢è·³è½¬-è¿”å›ModelAndViewå½¢å¼2(åº”ç”¨)nåœ¨Controllerä¸­æ–¹æ³•å½¢å‚ä¸Šç›´æ¥å£°æ˜ModelAndViewï¼Œæ— éœ€åœ¨æ–¹æ³•ä¸­è‡ªå·±åˆ›å»ºï¼Œåœ¨æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨è¯¥å¯¹è±¡è®¾ç½®è§†å›¾ï¼ŒåŒæ ·å¯ä»¥è·³è½¬é¡µé¢ @RequestMapping(value=&quot;/quick3&quot;) public ModelAndView save3(ModelAndView modelAndView){ modelAndView.addObject(&quot;username&quot;,&quot;itheima&quot;); modelAndView.setViewName(&quot;success&quot;); return modelAndView; } @RequestMapping(value=&quot;/quick4&quot;) public String save4(Model model){ model.addAttribute(&quot;username&quot;,&quot;åšå­¦è°·&quot;); return &quot;success&quot;; } 05-SpringMVCçš„æ•°æ®å“åº”-é¡µé¢è·³è½¬-è¿”å›ModelAndView3(åº”ç”¨)åœ¨Controlleræ–¹æ³•çš„å½¢å‚ä¸Šå¯ä»¥ç›´æ¥ä½¿ç”¨åŸç”Ÿçš„HttpServeltRequestå¯¹è±¡ï¼Œåªéœ€å£°æ˜å³å¯ @RequestMapping(value=&quot;/quick5&quot;) public String save5(HttpServletRequest request){ request.setAttribute(&quot;username&quot;,&quot;é…·ä¸é±¼&quot;); return &quot;success&quot;; } 06-SpringMVCçš„æ•°æ®å“åº”-å›å†™æ•°æ®-ç›´æ¥å›å†™å­—ç¬¦ä¸²(åº”ç”¨)é€šè¿‡SpringMVCæ¡†æ¶æ³¨å…¥çš„responseå¯¹è±¡ï¼Œä½¿ç”¨response.getWriter().print(â€œhello worldâ€) å›å†™æ•°æ®ï¼Œæ­¤æ—¶ä¸éœ€è¦è§†å›¾è·³è½¬ï¼Œä¸šåŠ¡æ–¹æ³•è¿”å›å€¼ä¸ºvoid å°†éœ€è¦å›å†™çš„å­—ç¬¦ä¸²ç›´æ¥è¿”å›ï¼Œä½†æ­¤æ—¶éœ€è¦é€šè¿‡@ResponseBodyæ³¨è§£å‘ŠçŸ¥SpringMVCæ¡†æ¶ï¼Œæ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ä¸æ˜¯è·³è½¬æ˜¯ç›´æ¥åœ¨httpå“åº”ä½“ä¸­è¿”å› @RequestMapping(value=&quot;/quick7&quot;) @ResponseBody //å‘ŠçŸ¥SpringMVCæ¡†æ¶ ä¸è¿›è¡Œè§†å›¾è·³è½¬ ç›´æ¥è¿›è¡Œæ•°æ®å“åº” public String save7() throws IOException { return &quot;hello itheima&quot;; } @RequestMapping(value=&quot;/quick6&quot;) public void save6(HttpServletResponse response) throws IOException { response.getWriter().print(&quot;hello itcast&quot;); } 07-SpringMVCçš„æ•°æ®å“åº”-å›å†™æ•°æ®-ç›´æ¥å›å†™jsonæ ¼å¼å­—ç¬¦ä¸²(åº”ç”¨)@RequestMapping(value=&quot;/quick8&quot;) @ResponseBody public String save8() throws IOException { return &quot;{\\&quot;username\\&quot;:\\&quot;zhangsan\\&quot;,\\&quot;age\\&quot;:18}&quot;; } æ‰‹åŠ¨æ‹¼æ¥jsonæ ¼å¼å­—ç¬¦ä¸²çš„æ–¹å¼å¾ˆéº»çƒ¦ï¼Œå¼€å‘ä¸­å¾€å¾€è¦å°†å¤æ‚çš„javaå¯¹è±¡è½¬æ¢æˆjsonæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨webé˜¶æ®µå­¦ä¹ è¿‡çš„jsonè½¬æ¢å·¥å…·jacksonè¿›è¡Œè½¬æ¢,é€šè¿‡jacksonè½¬æ¢jsonæ ¼å¼å­—ç¬¦ä¸²ï¼Œå›å†™å­—ç¬¦ä¸² @RequestMapping(value=&quot;/quick9&quot;) @ResponseBody public String save9() throws IOException { User user = new User(); user.setUsername(&quot;lisi&quot;); user.setAge(30); //ä½¿ç”¨jsonçš„è½¬æ¢å·¥å…·å°†å¯¹è±¡è½¬æ¢æˆjsonæ ¼å¼å­—ç¬¦ä¸²åœ¨è¿”å› ObjectMapper objectMapper = new ObjectMapper(); String json = objectMapper.writeValueAsString(user); return json; } 08-SpringMVCçš„æ•°æ®å“åº”-å›å†™æ•°æ®-è¿”å›å¯¹è±¡æˆ–é›†åˆ(åº”ç”¨)é€šè¿‡SpringMVCå¸®åŠ©æˆ‘ä»¬å¯¹å¯¹è±¡æˆ–é›†åˆè¿›è¡Œjsonå­—ç¬¦ä¸²çš„è½¬æ¢å¹¶å›å†™ï¼Œä¸ºå¤„ç†å™¨é€‚é…å™¨é…ç½®æ¶ˆæ¯è½¬æ¢å‚æ•°ï¼ŒæŒ‡å®šä½¿ç”¨jacksonè¿›è¡Œå¯¹è±¡æˆ–é›†åˆçš„è½¬æ¢ï¼Œå› æ­¤éœ€è¦åœ¨spring-mvc.xmlä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š &lt;bean class=&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;&gt; &lt;property name=&quot;messageConverters&quot;&gt; &lt;list&gt; &lt;bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;/&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; @RequestMapping(value=&quot;/quick10&quot;) @ResponseBody //æœŸæœ›SpringMVCè‡ªåŠ¨å°†Userè½¬æ¢æˆjsonæ ¼å¼çš„å­—ç¬¦ä¸² public User save10() throws IOException { User user = new User(); user.setUsername(&quot;lisi2&quot;); user.setAge(32); return user; } 09-SpringMVCçš„æ•°æ®å“åº”-å›å†™æ•°æ®-è¿”å›å¯¹è±¡æˆ–é›†åˆ2(åº”ç”¨)åœ¨æ–¹æ³•ä¸Šæ·»åŠ @ResponseBodyå°±å¯ä»¥è¿”å›jsonæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¿™æ ·é…ç½®æ¯”è¾ƒéº»çƒ¦ï¼Œé…ç½®çš„ä»£ç æ¯”è¾ƒå¤šï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨mvcçš„æ³¨è§£é©±åŠ¨ä»£æ›¿ä¸Šè¿°é…ç½® &lt;mvc:annotation-driven/&gt; åœ¨ SpringMVC çš„å„ä¸ªç»„ä»¶ä¸­ï¼Œå¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨ç§°ä¸º SpringMVC çš„ä¸‰å¤§ç»„ä»¶ã€‚ ä½¿ç”¨&lt;mvc:annotation-driven /&gt;è‡ªåŠ¨åŠ è½½ RequestMappingHandlerMappingï¼ˆå¤„ç†æ˜ å°„å™¨ï¼‰å’Œ RequestMappingHandlerAdapterï¼ˆ å¤„ ç† é€‚ é… å™¨ ï¼‰ï¼Œå¯ç”¨åœ¨Spring-xml.xmlé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ &lt;mvc:annotation-driven /&gt;æ›¿ä»£æ³¨è§£å¤„ç†å™¨å’Œé€‚é…å™¨çš„é…ç½®ã€‚ åŒæ—¶ä½¿ç”¨&lt;mvc:annotation-driven /&gt; é»˜è®¤åº•å±‚å°±ä¼šé›†æˆjacksonè¿›è¡Œå¯¹è±¡æˆ–é›†åˆçš„jsonæ ¼å¼å­—ç¬¦ä¸²çš„è½¬æ¢ 10-SpringMVCçš„æ•°æ®å“åº”-çŸ¥è¯†è¦ç‚¹å°ç»“(ç†è§£ï¼Œè®°å¿†)1ï¼‰ é¡µé¢è·³è½¬ ç›´æ¥è¿”å›å­—ç¬¦ä¸² é€šè¿‡ModelAndViewå¯¹è±¡è¿”å› 2ï¼‰ å›å†™æ•°æ® ç›´æ¥è¿”å›å­—ç¬¦ä¸² HttpServletResponse å¯¹è±¡ç›´æ¥å†™å›æ•°æ®ï¼ŒHttpServletRequestå¯¹è±¡å¸¦å›æ•°æ®ï¼ŒModelå¯¹è±¡å¸¦å›æ•°æ®æˆ–è€…@ResponseBodyå°†å­—ç¬¦ä¸²æ•°æ®å†™å› è¿”å›å¯¹è±¡æˆ–é›†åˆ @ResponseBody+&lt;mvc:annotation-driven/&gt; SpringMVCçš„è¯·æ±‚11-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è¯·æ±‚å‚æ•°ç±»å‹(ç†è§£)å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°çš„æ ¼å¼æ˜¯ï¼šname=value&amp;name=valueâ€¦â€¦ æœåŠ¡å™¨ç«¯è¦è·å¾—è¯·æ±‚çš„å‚æ•°ï¼Œæœ‰æ—¶è¿˜éœ€è¦è¿›è¡Œæ•°æ®çš„å°è£…ï¼ŒSpringMVCå¯ä»¥æ¥æ”¶å¦‚ä¸‹ç±»å‹çš„å‚æ•° åŸºæœ¬ç±»å‹å‚æ•° POJOç±»å‹å‚æ•° æ•°ç»„ç±»å‹å‚æ•° é›†åˆç±»å‹å‚æ•° 12-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—åŸºæœ¬ç±»å‹å‚æ•°(åº”ç”¨)Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•çš„å‚æ•°åç§°è¦ä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚å¹¶ä¸”èƒ½è‡ªåŠ¨åšç±»å‹è½¬æ¢ï¼› è‡ªåŠ¨çš„ç±»å‹è½¬æ¢æ˜¯æŒ‡ä»Stringå‘å…¶ä»–ç±»å‹çš„è½¬æ¢ http://localhost:8080/itheima_springmvc1/quick9?username=zhangsan&amp;age=12 @RequestMapping(value=&quot;/quick11&quot;) @ResponseBody public void save11(String username,int age) throws IOException { System.out.println(username); System.out.println(age); } 13-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—POJOç±»å‹å‚æ•°(åº”ç”¨)Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•çš„POJOå‚æ•°çš„å±æ€§åä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚ package com.itheima.domain; public class User { private String username; private int age; public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } public int getAge() { return age; } public void setAge(int age) { this.age = age; } @Override public String toString() { return &quot;User{&quot; + &quot;username=&#39;&quot; + username + &#39;\\&#39;&#39; + &quot;, age=&quot; + age + &#39;}&#39;; } } @RequestMapping(value=&quot;/quick12&quot;) @ResponseBody public void save12(User user) throws IOException { System.out.println(user); } 14-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—æ•°ç»„ç±»å‹å‚æ•°(åº”ç”¨)Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•æ•°ç»„åç§°ä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚ @RequestMapping(value=&quot;/quick13&quot;) @ResponseBody public void save13(String[] strs) throws IOException { System.out.println(Arrays.asList(strs)); } 15-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—é›†åˆç±»å‹å‚æ•°1(åº”ç”¨)è·å¾—é›†åˆå‚æ•°æ—¶ï¼Œè¦å°†é›†åˆå‚æ•°åŒ…è£…åˆ°ä¸€ä¸ªPOJOä¸­æ‰å¯ä»¥ã€‚ &lt;form action=&quot;${pageContext.request.contextPath}/user/quick14&quot; method=&quot;post&quot;&gt; &lt;%--è¡¨æ˜æ˜¯ç¬¬ä¸€ä¸ªUserå¯¹è±¡çš„username age--%&gt; &lt;input type=&quot;text&quot; name=&quot;userList[0].username&quot;&gt;&lt;br/&gt; &lt;input type=&quot;text&quot; name=&quot;userList[0].age&quot;&gt;&lt;br/&gt; &lt;input type=&quot;text&quot; name=&quot;userList[1].username&quot;&gt;&lt;br/&gt; &lt;input type=&quot;text&quot; name=&quot;userList[1].age&quot;&gt;&lt;br/&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt; &lt;/form&gt; package com.itheima.domain; import java.util.List; public class VO { private List&lt;User&gt; userList; public List&lt;User&gt; getUserList() { return userList; } public void setUserList(List&lt;User&gt; userList) { this.userList = userList; } @Override public String toString() { return &quot;VO{&quot; + &quot;userList=&quot; + userList + &#39;}&#39;; } } @RequestMapping(value=&quot;/quick14&quot;) @ResponseBody public void save14(VO vo) throws IOException { System.out.println(vo); } 16-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—é›†åˆç±»å‹å‚æ•°2(åº”ç”¨)å½“ä½¿ç”¨ajaxæäº¤æ—¶ï¼Œå¯ä»¥æŒ‡å®šcontentTypeä¸ºjsonå½¢å¼ï¼Œé‚£ä¹ˆåœ¨æ–¹æ³•å‚æ•°ä½ç½®ä½¿ç”¨@RequestBodyå¯ä»¥ç›´æ¥æ¥æ”¶é›†åˆæ•°æ®è€Œæ— éœ€ä½¿ç”¨POJOè¿›è¡ŒåŒ…è£… &lt;script src=&quot;${pageContext.request.contextPath}/js/jquery-3.3.1.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var userList = new Array(); userList.push({username:&quot;zhangsan&quot;,age:18}); userList.push({username:&quot;lisi&quot;,age:28}); $.ajax({ type:&quot;POST&quot;, url:&quot;${pageContext.request.contextPath}/user/quick15&quot;, data:JSON.stringify(userList), contentType:&quot;application/json;charset=utf-8&quot; }); &lt;/script&gt; @RequestMapping(value=&quot;/quick15&quot;) @ResponseBody public void save15(@RequestBody List&lt;User&gt; userList) throws IOException { System.out.println(userList); } 17-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-é™æ€èµ„æºè®¿é—®çš„å¼€å¯(åº”ç”¨)å½“æœ‰é™æ€èµ„æºéœ€è¦åŠ è½½æ—¶ï¼Œæ¯”å¦‚jqueryæ–‡ä»¶ï¼Œé€šè¿‡è°·æ­Œå¼€å‘è€…å·¥å…·æŠ“åŒ…å‘ç°ï¼Œæ²¡æœ‰åŠ è½½åˆ°jqueryæ–‡ä»¶ï¼ŒåŸå› æ˜¯SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„url-patterné…ç½®çš„æ˜¯/,ä»£è¡¨å¯¹æ‰€æœ‰çš„èµ„æºéƒ½è¿›è¡Œè¿‡æ»¤æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æŒ‡å®šæ”¾è¡Œé™æ€èµ„æºï¼š â€¢åœ¨spring-mvc.xmlé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ”¾è¡Œçš„èµ„æº â€‹ &lt;mvc:resources mapping=&quot;/js/**&quot;location=&quot;/js/&quot;/&gt; â€¢ä½¿ç”¨&lt;mvc:default-servlet-handler/&gt;æ ‡ç­¾ &lt;!--å¼€å‘èµ„æºçš„è®¿é—®--&gt; &lt;!--&lt;mvc:resources mapping=&quot;/js/**&quot; location=&quot;/js/&quot;/&gt; &lt;mvc:resources mapping=&quot;/img/**&quot; location=&quot;/img/&quot;/&gt;--&gt; &lt;mvc:default-servlet-handler/&gt; 18-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨(åº”ç”¨)å½“postè¯·æ±‚æ—¶ï¼Œæ•°æ®ä¼šå‡ºç°ä¹±ç ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æ»¤å™¨æ¥è¿›è¡Œç¼–ç çš„è¿‡æ»¤ã€‚ &lt;!--é…ç½®å…¨å±€è¿‡æ»¤çš„filter--&gt; &lt;filter&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; 19-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-å‚æ•°ç»‘å®šæ³¨è§£@RequestParam(åº”ç”¨)å½“è¯·æ±‚çš„å‚æ•°åç§°ä¸Controllerçš„ä¸šåŠ¡æ–¹æ³•å‚æ•°åç§°ä¸ä¸€è‡´æ—¶ï¼Œå°±éœ€è¦é€šè¿‡@RequestParamæ³¨è§£æ˜¾ç¤ºçš„ç»‘å®š &lt;form action=&quot;${pageContext.request.contextPath}/quick16&quot; method=&quot;post&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;br&gt; &lt;/form&gt; @RequestMapping(value=&quot;/quick16&quot;) @ResponseBody public void save16(@RequestParam(value=&quot;name&quot;,required = false,defaultValue = &quot;itcast&quot;) String username) throws IOException { System.out.println(username); } 20-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-Restfulé£æ ¼çš„å‚æ•°çš„è·å–(åº”ç”¨)Restfulæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€è®¾è®¡é£æ ¼ï¼Œè€Œä¸æ˜¯æ ‡å‡†ï¼Œåªæ˜¯æä¾›äº†ä¸€ç»„è®¾è®¡åŸåˆ™å’Œçº¦æŸæ¡ä»¶ã€‚ä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ç±»çš„è½¯ä»¶ï¼ŒåŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜æœºåˆ¶ç­‰ã€‚ Restfulé£æ ¼çš„è¯·æ±‚æ˜¯ä½¿ç”¨â€œurl+è¯·æ±‚æ–¹å¼â€è¡¨ç¤ºä¸€æ¬¡è¯·æ±‚ç›®çš„çš„ï¼ŒHTTP åè®®é‡Œé¢å››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯å¦‚ä¸‹ï¼š GETï¼šç”¨äºè·å–èµ„æº POSTï¼šç”¨äºæ–°å»ºèµ„æº PUTï¼šç”¨äºæ›´æ–°èµ„æº DELETEï¼šç”¨äºåˆ é™¤èµ„æº ä¾‹å¦‚ï¼š /user/1 GET ï¼š å¾—åˆ° id = 1 çš„ user /user/1 DELETEï¼š åˆ é™¤ id = 1 çš„ user /user/1 PUTï¼š æ›´æ–° id = 1 çš„ user /user POSTï¼š æ–°å¢ user ä¸Šè¿°urlåœ°å€/user/1ä¸­çš„1å°±æ˜¯è¦è·å¾—çš„è¯·æ±‚å‚æ•°ï¼Œåœ¨SpringMVCä¸­å¯ä»¥ä½¿ç”¨å ä½ç¬¦è¿›è¡Œå‚æ•°ç»‘å®šã€‚åœ°å€/user/1å¯ä»¥å†™æˆ/user/{id}ï¼Œå ä½ç¬¦{id}å¯¹åº”çš„å°±æ˜¯1çš„å€¼ã€‚åœ¨ä¸šåŠ¡æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨@PathVariableæ³¨è§£è¿›è¡Œå ä½ç¬¦çš„åŒ¹é…è·å–å·¥ä½œã€‚ http://localhost:8080/itheima_springmvc1/quick17/zhangsan @RequestMapping(value=&quot;/quick17/{name}&quot;) @ResponseBody public void save17(@PathVariable(value=&quot;name&quot;) String username) throws IOException { System.out.println(username); } 21-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨(åº”ç”¨)SpringMVC é»˜è®¤å·²ç»æä¾›äº†ä¸€äº›å¸¸ç”¨çš„ç±»å‹è½¬æ¢å™¨ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯æäº¤çš„å­—ç¬¦ä¸²è½¬æ¢æˆintå‹è¿›è¡Œå‚æ•°è®¾ç½®ã€‚ ä½†æ˜¯ä¸æ˜¯æ‰€æœ‰çš„æ•°æ®ç±»å‹éƒ½æä¾›äº†è½¬æ¢å™¨ï¼Œæ²¡æœ‰æä¾›çš„å°±éœ€è¦è‡ªå®šä¹‰è½¬æ¢å™¨ï¼Œä¾‹å¦‚ï¼šæ—¥æœŸç±»å‹çš„æ•°æ®å°±éœ€è¦è‡ªå®šä¹‰è½¬æ¢å™¨ã€‚ public class DateConverter implements Converter&lt;String, Date&gt; { public Date convert(String dateStr) { //å°†æ—¥æœŸå­—ç¬¦ä¸²è½¬æ¢æˆæ—¥æœŸå¯¹è±¡ è¿”å› SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); Date date = null; try { date = format.parse(dateStr); } catch (ParseException e) { e.printStackTrace(); } return date; } } @RequestMapping(value=&quot;/quick18&quot;) @ResponseBody public void save18(Date date) throws IOException { System.out.println(date); } 22-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—Servletç›¸å…³API(åº”ç”¨)SpringMVCæ”¯æŒä½¿ç”¨åŸå§‹ServletAPIå¯¹è±¡ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„å‚æ•°è¿›è¡Œæ³¨å…¥ï¼Œå¸¸ç”¨çš„å¯¹è±¡å¦‚ä¸‹ï¼š HttpServletRequest HttpServletResponse HttpSession @RequestMapping(value=&quot;/quick19&quot;) @ResponseBody public void save19(HttpServletRequest request, HttpServletResponse response, HttpSession session) throws IOException { System.out.println(request); System.out.println(response); System.out.println(session); } 23-SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—è¯·æ±‚å¤´ä¿¡æ¯(åº”ç”¨)ä½¿ç”¨@RequestHeaderå¯ä»¥è·å¾—è¯·æ±‚å¤´ä¿¡æ¯ï¼Œç›¸å½“äºwebé˜¶æ®µå­¦ä¹ çš„request.getHeader(name) @RequestHeaderæ³¨è§£çš„å±æ€§å¦‚ä¸‹ï¼š valueï¼šè¯·æ±‚å¤´çš„åç§° requiredï¼šæ˜¯å¦å¿…é¡»æºå¸¦æ­¤è¯·æ±‚å¤´ @RequestMapping(value=&quot;/quick20&quot;) @ResponseBody public void save20(@RequestHeader(value = &quot;User-Agent&quot;,required = false) String user_agent) throws IOException { System.out.println(user_agent); } ä½¿ç”¨@CookieValueå¯ä»¥è·å¾—æŒ‡å®šCookieçš„å€¼ @CookieValueæ³¨è§£çš„å±æ€§å¦‚ä¸‹ï¼š valueï¼šæŒ‡å®šcookieçš„åç§° requiredï¼šæ˜¯å¦å¿…é¡»æºå¸¦æ­¤cookie @RequestMapping(value=&quot;/quick21&quot;) @ResponseBody public void save21(@CookieValue(value = &quot;JSESSIONID&quot;) String jsessionId) throws IOException { System.out.println(jsessionId); }","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"https://lingdas.github.io/tags/springboot/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}]},{"title":"é…·æˆ‘éŸ³ä¹çˆ¬å–","slug":"é…·æˆ‘éŸ³ä¹çˆ¬å–","date":"2021-06-15T00:41:08.000Z","updated":"2021-06-16T12:38:30.793Z","comments":true,"path":"2021/06/15/é…·æˆ‘éŸ³ä¹çˆ¬å–/","link":"","permalink":"https://lingdas.github.io/2021/06/15/é…·æˆ‘éŸ³ä¹çˆ¬å–/","excerpt":"","text":"é…·æˆ‘éŸ³ä¹çˆ¬è™«ä¸»è¦æ¥å£è·å–æ­Œæ›²ä¸‹è½½åœ°å€ http://www.kuwo.cn/url?format=mp3&amp;rid=173345979&amp;response=url&amp;type=convert_url3&amp;br=320kmp3&amp;from=web&amp;t=1623843977328&amp;httpsStatus=1 è·å–ç»“æœurl æ˜¯æ­Œæ›²çš„ä¸‹è½½åœ°å€ {&quot;code&quot;: 200, &quot;msg&quot;: &quot;success&quot;, &quot;url&quot;: &quot;https://gv-sycdn.kuwo.cn/8ee6ee8edbbafa235e08991ac4382519/60c9e6b6/resource/n2/30/9/3326431231.mp3&quot;} ä¸»è¦å‚æ•°rid æ­Œæ›²çš„idbr æ­Œæ›²çš„ç ç‡ 320æ˜¯æœ€é«˜ç ç‡t æ—¶é—´æˆ³ç”¨python æ‹¼å‡‘å‚æ•° base_url = &#39;http://www.kuwo.cn/url&#39; params = { &#39;format&#39;: &#39;mp3&#39;, &#39;rid&#39;: rid, &#39;response&#39;: &#39;url&#39;, &#39;type&#39;: &#39;convert_url3&#39;, &#39;br&#39;: &#39;320kmp3&#39;, # 320K ä»£è¡¨æ˜¯æ— é™¨éŸ³è´¨ã€‚ &#39;from&#39;: &#39;web&#39;, &#39;t&#39;: str(int(time.time() * 1000)), &#39;httpsStatus&#39;: &#39;1&#39; } è·å–æ­Œæ›²rid http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key=%E9%99%88%E6%85%A7%E7%90%B3&amp;pn=1&amp;rn=30&amp;httpsStatus=1 ä¸»è¦å‚æ•°key ä½ è¦å¾—æ­Œæ›²æˆ–è€…ä½œè€…å¾—åå­—pn å½“å‰å¾—é¡µæ•°rn ä¸€é¡µæ˜¾ç¤ºå¤šå°‘é¦– è¯·æ±‚æ—¶headeréœ€è¦çš„å‚æ•°CookieUser-Agent æµè§ˆå™¨è¡¨ç¤ºcsrf Cookieä¸­çš„kw_tokençš„å€¼Host ä¸»åŸŸåReferer æ¥æº è·å–ç»“æœrid æ­Œæ›²çš„ID name æ­Œæ›²åå­— songTimeMinutes æ­Œæ›²çš„æ—¶é•¿ { &quot;code&quot;: 200, &quot;curTime&quot;: 1623845910234, &quot;data&quot;: { &quot;total&quot;: &quot;1577&quot;, &quot;list&quot;: [ { &quot;musicrid&quot;: &quot;MUSIC_7165139&quot;, &quot;barrage&quot;: &quot;0&quot;, &quot;artist&quot;: &quot;å¢å† å»·&amp;å¼ æ™ºéœ–&amp;æˆé¾™&amp;è®¸å† æ°&amp;é™ˆæ…§ç³&amp;é™ˆæ…§å¨´&amp;æå…‹å‹¤&amp;G.E.M.é‚“ç´«æ£‹&amp;å¼ å­¦å‹&amp;é™ˆå¥•è¿…&amp;è°­å’éºŸ&quot;, &quot;mvpayinfo&quot;: { &quot;play&quot;: &quot;0&quot;, &quot;vid&quot;: &quot;3991780&quot;, &quot;download&quot;: &quot;0&quot; }, &quot;pic&quot;: &quot;https://img4.kuwo.cn/star/albumcover/120/26/5/2778776974.jpg&quot;, &quot;isstar&quot;: 0, &quot;rid&quot;: 7165139, &quot;duration&quot;: 255, &quot;score100&quot;: &quot;79&quot;, &quot;content_type&quot;: &quot;0&quot;, &quot;track&quot;: 0, &quot;hasLossless&quot;: false, &quot;hasmv&quot;: 1, &quot;album&quot;: &quot;çœŸçš„è‹±é›„&quot;, &quot;albumid&quot;: &quot;558959&quot;, &quot;pay&quot;: &quot;0&quot;, &quot;artistid&quot;: 690, &quot;albumpic&quot;: &quot;https://img4.kuwo.cn/star/albumcover/120/26/5/2778776974.jpg&quot;, &quot;originalsongtype&quot;: 1, &quot;songTimeMinutes&quot;: &quot;04:15&quot;, &quot;isListenFee&quot;: false, &quot;pic120&quot;: &quot;https://img4.kuwo.cn/star/albumcover/120/26/5/2778776974.jpg&quot;, &quot;name&quot;: &quot;çœŸçš„è‹±é›„&quot;, &quot;online&quot;: 1, &quot;payInfo&quot;: { &quot;play&quot;: &quot;0000&quot;, &quot;download&quot;: &quot;0000&quot;, &quot;local_encrypt&quot;: &quot;0&quot;, &quot;limitfree&quot;: &quot;0&quot;, &quot;cannotDownload&quot;: &quot;0&quot;, &quot;cannotOnlinePlay&quot;: &quot;0&quot;, &quot;feeType&quot;: { &quot;song&quot;: &quot;0&quot;, &quot;album&quot;: &quot;0&quot;, &quot;vip&quot;: &quot;0&quot;, &quot;bookvip&quot;: &quot;0&quot; }, &quot;listen_fragment&quot;: &quot;0&quot;, &quot;tips_intercept&quot;: &quot;0&quot; } }, { &quot;musicrid&quot;: &quot;MUSIC_86371&quot;, &quot;barrage&quot;: &quot;0&quot;, &quot;artist&quot;: &quot;é™ˆæ…§ç³&quot;, &quot;mvpayinfo&quot;: { &quot;play&quot;: &quot;0&quot;, &quot;vid&quot;: &quot;253402&quot;, &quot;download&quot;: &quot;0&quot; }, &quot;pic&quot;: &quot;https://img4.kuwo.cn/star/albumcover/120/70/38/3191802684.jpg&quot;, &quot;isstar&quot;: 0, &quot;rid&quot;: 86371, &quot;duration&quot;: 247, &quot;score100&quot;: &quot;79&quot;, &quot;content_type&quot;: &quot;0&quot;, &quot;track&quot;: 0, &quot;hasLossless&quot;: false, &quot;hasmv&quot;: 1, &quot;album&quot;: &quot;é—ªäº®æ¯ä¸€å¤©Shining&amp;nbsp;æ–°æ­Œ&amp;nbsp;+&amp;nbsp;ç²¾é€‰&quot;, &quot;albumid&quot;: &quot;24050&quot;, &quot;pay&quot;: &quot;16515324&quot;, &quot;artistid&quot;: 871, &quot;albumpic&quot;: &quot;https://img4.kuwo.cn/star/albumcover/120/70/38/3191802684.jpg&quot;, &quot;originalsongtype&quot;: 0, &quot;songTimeMinutes&quot;: &quot;04:07&quot;, &quot;isListenFee&quot;: false, &quot;pic120&quot;: &quot;https://img4.kuwo.cn/star/albumcover/120/70/38/3191802684.jpg&quot;, &quot;name&quot;: &quot;è®°äº‹æœ¬-é€‰è‡ªâ€œæˆ‘çš„ç§˜å¯†èŠ±å›­2â€&quot;, &quot;online&quot;: 1, &quot;payInfo&quot;: { &quot;play&quot;: &quot;1100&quot;, &quot;download&quot;: &quot;1111&quot;, &quot;local_encrypt&quot;: &quot;1&quot;, &quot;limitfree&quot;: &quot;0&quot;, &quot;cannotDownload&quot;: &quot;0&quot;, &quot;cannotOnlinePlay&quot;: &quot;0&quot;, &quot;feeType&quot;: { &quot;song&quot;: &quot;1&quot;, &quot;album&quot;: &quot;0&quot;, &quot;vip&quot;: &quot;1&quot;, &quot;bookvip&quot;: &quot;0&quot; }, &quot;listen_fragment&quot;: &quot;0&quot;, &quot;tips_intercept&quot;: &quot;0&quot; } }, pythonå®æˆ˜import time, os, requests, threading, re, multiprocessing from multiprocessing import Pool class KuwoMusic: def __init__(self,cookie): self.cookie = cookie def get_music_url(self, rid): # http://www.kuwo.cn/url?format=mp3&amp;rid=440613&amp;response=url&amp;type=convert_url3&amp;br=320kmp3&amp;from=web&amp;t=1620179066636&amp;httpsStatus=1 base_url = &#39;http://www.kuwo.cn/url&#39; params = { &#39;format&#39;: &#39;mp3&#39;, &#39;rid&#39;: rid, &#39;response&#39;: &#39;url&#39;, &#39;type&#39;: &#39;convert_url3&#39;, &#39;br&#39;: &#39;320kmp3&#39;, # 320K ä»£è¡¨æ˜¯æ— é™¨éŸ³è´¨ã€‚ &#39;from&#39;: &#39;web&#39;, &#39;t&#39;: str(int(time.time() * 1000)), &#39;httpsStatus&#39;: &#39;1&#39; } headers = { &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Host&#39;: &#39;www.kuwo.cn&#39;, &#39;Referer&#39;: &#39;http://www.kuwo.cn/search/list&#39;, &#39;Cookie&#39;: self.cookie, &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36&#39; } resp = requests.get(url=base_url, params=params, headers=headers) music_url = resp.json().get(&quot;url&quot;) return music_url def music_download(self, url, name): host = re.findall(&#39;https://(.*?)/&#39;, url)[0] headers = { &#39;Accept&#39;: &#39;*/*&#39;, &#39;sec-ch-ua&#39;: &#39;&quot; Not A;Brand&quot;;v = &quot;99&quot;, &quot;Chromium&quot;;v = &quot;90&quot;, &quot;Google Chrome&quot;;v = &quot;90&quot;&#39;, &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Host&#39;: host, &#39;Referer&#39;: url, &#39;Cookie&#39;: self.cookie, &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36&#39; } print(name + &quot;.mp3\\tå¼€å§‹ä¸‹è½½...&quot;) data = requests.get(url=url, headers=headers).content try: if not os.path.exists(&quot;éŸ³ä¹ä¸‹è½½&quot;): os.mkdir(&quot;éŸ³ä¹ä¸‹è½½&quot;) except: pass filepath = &quot;éŸ³ä¹ä¸‹è½½/&quot; + name + &#39;.mp3&#39; with open(filepath, &#39;wb&#39;) as f: f.write(data) print(name + &quot;.mp3\\tä¸‹è½½å®Œæˆ.&quot;) def get_music_list(self, key, pn): # http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key=%E5%91%A8%E6%9D%B0%E4%BC%A6&amp;pn=1&amp;rn=30&amp;httpsStatus=1&amp;reqId=1aee48d0-ad43-11eb-b9fa-5f2f406dcb43 base_url = &#39;http://www.kuwo.cn/api/www/search/searchMusicBykeyWord&#39; params = { &#39;key&#39;: key, &#39;pn&#39;: pn, &#39;rn&#39;: 30, &#39;httpsStatus&#39;: &#39;1&#39; } csrf = re.findall(&quot;kw_token=(.{11})&quot;, self.cookie)[0] headers = { &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Cookie&#39;: self.cookie, &#39;csrf&#39;: csrf, # è¿™ä¸ªå€¼æ˜¯cookie é‡Œé¢çš„ kw_tokenå€¼ &#39;Host&#39;: &#39;www.kuwo.cn&#39;, &#39;Referer&#39;: &#39;http://www.kuwo.cn/search/list&#39;, &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36&#39; } resp = requests.get(url=base_url, params=params, headers=headers) music_data = [] if len(resp.text) &gt; 88: # å‡ºé”™è¿”å›é•¿åº¦æ˜¯84 music_list = resp.json() music_list = music_list[&#39;data&#39;][&#39;list&#39;] for music in music_list: artist = music[&#39;artist&#39;] # æ­Œæ›²æ¼”å”±è€… artist = self.rename_use(artist) name = music[&#39;name&#39;] name = self.rename_use(name) rid = music[&#39;rid&#39;] # æ­Œæ›² rid duration = music[&#39;duration&#39;] # è¿™ä¸ªå€¼æ˜¯æ­Œæ›²æ—¶é•¿ï¼Œå•ä½æ˜¯ ç§’ duration = self.s_to_m(duration) music_data.append({&#39;name&#39;: name, &#39;artist&#39;: artist, &#39;rid&#39;: rid, &#39;duration&#39;: duration}) else: print(&quot;æ•°æ®è·å–å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚&quot;) return music_data def reset_list(self, a): # åˆ—è¡¨å»é‡å¤æ•°æ®ï¼Œ a ä»£è¡¨ä¸€ä¸‹åˆ—è¡¨ c = [] for i in range(len(a)): b = a.pop() if b not in a: c.append(b) return c def rename_use(self, file_name): file_name = file_name.replace(&quot;\\\\&quot;, &#39;&#39;).replace(&quot;/&quot;, &#39;&#39;).replace(&quot;:&quot;, &#39;&#39;).replace(&quot;*&quot;, &#39;&#39;).replace(&quot;?&quot;, &#39;&#39;).replace( &#39;&quot;&#39;, &#39;&#39;).replace(&quot;&lt;&quot;, &#39;&#39;).replace(&quot;&gt;&quot;, &#39;&#39;).replace(&quot;|&quot;, &#39;&#39;).replace(&quot;&amp;nbsp;&quot;, &quot;&quot;) return file_name def s_to_m(self, s): m = int(s) / 60 a = m - int(m) b = a * 60 b = int(b) if int(b) &lt; 10: b = &quot;0&quot; + str(int(b)) ms = str(int(m)) + &quot;ï¼š&quot; + str(b) return ms def show_short(self, name): if len(name) &gt; 18: name = name[:18] + &quot;..&quot; return name def main(self): inp = input(&quot;è¯·è¾“å…¥æ­Œæ›²åæˆ–æ­Œæ‰‹ï¼š\\n&quot;) pn = 1 musics_all = [] while True: music_data = self.get_music_list(inp, pn=pn) if music_data: musics_all.append(music_data) # åœ¨è¿™é‡Œåˆ¤æ–­å»é‡ï¼Œä¹Ÿè¡Œã€‚åªæ˜¯æŠŠå»é‡æ–¹æ³•å†™å‡ºæ¥æ‰æƒ³åˆ°ï¼Œ å”‰ï¼ï¼ for i, music in enumerate(music_data): artist = music[&#39;artist&#39;] # æ­Œæ›²æ¼”å”±è€… artist = self.show_short(artist) name = music[&#39;name&#39;] name = self.show_short(name) rid = music[&#39;rid&#39;] # æ­Œæ›² rid duration = music[&#39;duration&#39;] # æ­Œæ›²æ—¶é•¿ å•ä½ ç§’ songTimeMinutes print(f&quot;{i + 1}. {name} \\tæ¼”å”±:{artist} \\tæ—¶é•¿:{duration}&quot;) print(&quot;*&quot; * 40 + &quot; åä¸½çš„åˆ†å‰²çº¿ &quot; + &quot;*&quot; * 40) if pn == 1: print(&quot;è¯·é€‰æ‹©ä¸‹è½½æ–¹å¼ï¼š \\n1.æŒ‰æ­Œæ›²ç¼–å·ä¸‹è½½ \\t3.ä¸‹ä¸€é¡µ\\t4.å…¨éƒ¨ä¸‹è½½\\t æŒ‰0é€€å‡º\\n&quot;) elif pn &gt; 1: print(&quot;è¯·é€‰æ‹©ä¸‹è½½æ–¹å¼ï¼š \\n1.æŒ‰æ­Œæ›²ç¼–å·ä¸‹è½½ \\t2.ä¸Šä¸€é¡µ \\t3.ä¸‹ä¸€é¡µ\\t4.å…¨éƒ¨ä¸‹è½½\\t æŒ‰0é€€å‡º\\n&quot;) inp_b = input() if inp_b == &#39;1&#39;: while True: print(&quot;é€‰æ‹©æ­Œæ›²ç¼–å·ï¼ŒåŠ å…¥ä¸‹è½½..è¾“å…¥&#39;0&#39;, é€€å‡º&quot;) inp_c = input(&quot;&quot;) if int(inp_c) in [i for i in range(1, 31)]: rid = music_data[int(inp_c) - 1][&#39;rid&#39;] artist = music_data[int(inp_c) - 1][&#39;artist&#39;] name = music_data[int(inp_c) - 1][&#39;name&#39;] music_url = self.get_music_url(rid) music_name = name + &quot;-&quot; + artist th = threading.Thread(target=self.music_download, args=(music_url, music_name)) th.start() # th.join() print(&quot;æ·»åŠ æˆåŠŸï¼Œè¯·ç»§ç»­&quot;) elif inp_c == &#39;0&#39;: print(&quot;æˆåŠŸé€€å‡º&quot;) break else: print(&quot;è¾“å…¥æœ‰è¯¯,æ˜¯å¯¹åº”æ­Œæ›²çš„ç¼–å·ï¼ˆ1,4 æˆ–æ˜¯ 12ï¼‰&quot;) time.sleep(3) elif inp_b == &#39;2&#39;: pn -= 1 if pn &lt;1: print(&quot;æ“ä½œä¸å½“ï¼Œè¯·é‡è¯•&quot;) pn = 1 elif inp_b == &#39;3&#39;: pn += 1 elif inp_b == &#39;4&#39;: musics_all = self.reset_list(musics_all) # å»é™¤é‡å¤æ­Œå• for musics in musics_all: for music in musics: rid = music[&#39;rid&#39;] artist = music[&#39;artist&#39;] name = music[&#39;name&#39;] music_url = self.get_music_url(rid) music_name = name + &quot;-&quot; + artist # print(music_name,music_url) # th = threading.Thread(target=self.music_download, args=(music_url, music_name)) # th.start() # th.join() pool.apply_async(self.music_download, args=(music_url, music_name)) pool.close() pool.join() print(&quot;ä¸‹è½½å®Œæ¯•ï¼Œç¨‹åºå³å°†é€€å‡º&quot;) time.sleep(2) break elif inp_b == &#39;0&#39;: print(&#39;æˆåŠŸé€€å‡ºï¼Œç¨‹åºå³å°†å…³é—­&#39;) time.sleep(2) break else: print(&quot;å¯èƒ½è¾“å…¥æœ‰è¯¯ï¼Œå¯ä»¥é‡è¯•&quot;) time.sleep(2) else: print(&quot;æ•°æ®è·å–å¤±è´¥ï¼Œæˆ–æ²¡æœ‰æ›´å¤šæ­Œæ›²äº†&quot;) time.sleep(2) def get_cookie(): url = &#39;http://www.kuwo.cn/&#39; headers = { &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Host&#39;: &#39;www.kuwo.cn&#39;, &#39;Referer&#39;: &#39;http://www.kuwo.cn/&#39;, &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36&#39; } res = requests.get(url=url, headers=headers) cookies = res.cookies.items() cookie = &#39;&#39; for name, value in cookies: cookie += &#39;{0}={1};&#39;.format(name, value) return cookie if __name__ == &#39;__main__&#39;: multiprocessing.freeze_support() pool = Pool(3) cookie = get_cookie() kuwo = KuwoMusic(cookie) kuwo.main()","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}],"tags":[{"name":"python","slug":"python","permalink":"https://lingdas.github.io/tags/python/"},{"name":"é…·æˆ‘éŸ³ä¹çˆ¬å–\"","slug":"é…·æˆ‘éŸ³ä¹çˆ¬å–","permalink":"https://lingdas.github.io/tags/é…·æˆ‘éŸ³ä¹çˆ¬å–/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://lingdas.github.io/tags/çˆ¬è™«/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}]},{"title":"JdbcTemplate","slug":"JdbcTemplate","date":"2021-06-14T03:33:38.000Z","updated":"2021-06-16T06:40:14.000Z","comments":true,"path":"2021/06/14/JdbcTemplate/","link":"","permalink":"https://lingdas.github.io/2021/06/14/JdbcTemplate/","excerpt":"","text":"JdbcTemplateåŸºæœ¬ä½¿ç”¨01-JdbcTemplateåŸºæœ¬ä½¿ç”¨-æ¦‚è¿°(äº†è§£)JdbcTemplateæ˜¯springæ¡†æ¶ä¸­æä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯å¯¹åŸå§‹ç¹ççš„Jdbc APIå¯¹è±¡çš„ç®€å•å°è£…ã€‚springæ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„æ“ä½œæ¨¡æ¿ç±»ã€‚ä¾‹å¦‚ï¼šæ“ä½œå…³ç³»å‹æ•°æ®çš„JdbcTemplateå’ŒHibernateTemplateï¼Œæ“ä½œnosqlæ•°æ®åº“çš„RedisTemplateï¼Œæ“ä½œæ¶ˆæ¯é˜Ÿåˆ—çš„JmsTemplateç­‰ç­‰ã€‚ 02-JdbcTemplateåŸºæœ¬ä½¿ç”¨-å¼€å‘æ­¥éª¤(ç†è§£)â‘ å¯¼å…¥spring-jdbcå’Œspring-txåæ ‡ â‘¡åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“ â‘¢åˆ›å»ºJdbcTemplateå¯¹è±¡ â‘£æ‰§è¡Œæ•°æ®åº“æ“ä½œ 03-JdbcTemplateåŸºæœ¬ä½¿ç”¨-å¿«é€Ÿå…¥é—¨ä»£ç å®ç°(åº”ç”¨)å¯¼å…¥spring-jdbcå’Œspring-txåæ ‡ &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.itheima&lt;/groupId&gt; &lt;artifactId&gt;itheima_spring_jdbc&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;name&gt;itheima_spring_jdbc Maven Webapp&lt;/name&gt; &lt;!-- FIXME change it to the project&#39;s website --&gt; &lt;url&gt;http://www.example.com&lt;/url&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.32&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;c3p0&lt;/groupId&gt; &lt;artifactId&gt;c3p0&lt;/artifactId&gt; &lt;version&gt;0.9.1.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.10&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;3.0.1&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt; &lt;version&gt;2.2.1&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-core&lt;/artifactId&gt; &lt;version&gt;2.9.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.9.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt; &lt;version&gt;2.9.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; &lt;version&gt;1.3.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;commons-io&lt;/groupId&gt; &lt;artifactId&gt;commons-io&lt;/artifactId&gt; &lt;version&gt;2.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/project&gt; åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“ package com.itheima.domain; public class Account { private String name; private double money; public String getNa me() { return name; } public void setName(String name) { this.name = name; } public double getMoney() { return money; } public void setMoney(double money) { this.money = money; } @Override public String toString() { return &quot;Account{&quot; + &quot;name=&#39;&quot; + name + &#39;\\&#39;&#39; + &quot;, money=&quot; + money + &#39;}&#39;; } } åˆ›å»ºJdbcTemplateå¯¹è±¡ æ‰§è¡Œæ•°æ®åº“æ“ä½œ @Test //æµ‹è¯•JdbcTemplateå¼€å‘æ­¥éª¤ public void test1() throws PropertyVetoException { //åˆ›å»ºæ•°æ®æºå¯¹è±¡ ComboPooledDataSource dataSource = new ComboPooledDataSource(); dataSource.setDriverClass(&quot;com.mysql.jdbc.Driver&quot;); dataSource.setJdbcUrl(&quot;jdbc:mysql://localhost:3306/test&quot;); dataSource.setUser(&quot;root&quot;); dataSource.setPassword(&quot;root&quot;); JdbcTemplate jdbcTemplate = new JdbcTemplate(); //è®¾ç½®æ•°æ®æºå¯¹è±¡ çŸ¥é“æ•°æ®åº“åœ¨å“ª jdbcTemplate.setDataSource(dataSource); //æ‰§è¡Œæ“ä½œ int row = jdbcTemplate.update(&quot;insert into account values(?,?)&quot;, &quot;tom&quot;, 5000); System.out.println(row); } 04-JdbcTemplateåŸºæœ¬ä½¿ç”¨-springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡åˆ†æ(ç†è§£)æˆ‘ä»¬å¯ä»¥å°†JdbcTemplateçš„åˆ›å»ºæƒäº¤ç»™Springï¼Œå°†æ•°æ®æºDataSourceçš„åˆ›å»ºæƒä¹Ÿäº¤ç»™Springï¼Œåœ¨Springå®¹å™¨å†…éƒ¨å°†æ•°æ®æºDataSourceæ³¨å…¥åˆ°JdbcTemplateæ¨¡ç‰ˆå¯¹è±¡ä¸­,ç„¶åé€šè¿‡Springå®¹å™¨è·å¾—JdbcTemplateå¯¹è±¡æ¥æ‰§è¡Œæ“ä½œã€‚ 05-JdbcTemplateåŸºæœ¬ä½¿ç”¨-springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡ä»£ç å®ç°(åº”ç”¨)é…ç½®å¦‚ä¸‹ï¼š &lt;!--æ•°æ®æºå¯¹è±¡--&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql:///test&quot;&gt;&lt;/property&gt; &lt;property name=&quot;user&quot; value=&quot;root&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--jdbcæ¨¡æ¿å¯¹è±¡--&gt; &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt; æµ‹è¯•ä»£ç  @Test //æµ‹è¯•Springäº§ç”ŸjdbcTemplateå¯¹è±¡ public void test2() throws PropertyVetoException { ApplicationContext app = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); JdbcTemplate jdbcTemplate = app.getBean(JdbcTemplate.class); int row = jdbcTemplate.update(&quot;insert into account values(?,?)&quot;, &quot;lisi&quot;, 5000); System.out.println(row); } 06-JdbcTemplateåŸºæœ¬ä½¿ç”¨-springäº§ç”Ÿæ¨¡æ¿å¯¹è±¡ä»£ç å®ç°ï¼ˆæŠ½å–jdbc.propertiesï¼‰(åº”ç”¨)å°†æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯æŠ½å–åˆ°å¤–éƒ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå’Œspringçš„é…ç½®æ–‡ä»¶åˆ†ç¦»å¼€ï¼Œæœ‰åˆ©äºåæœŸç»´æŠ¤ jdbc.driver=com.mysql.jdbc.Driver jdbc.url=jdbc:mysql://localhost:3306/test jdbc.username=root jdbc.password=root é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸º: &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd &quot;&gt; &lt;!--åŠ è½½jdbc.properties--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;!--æ•°æ®æºå¯¹è±¡--&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;${jdbc.driver}&quot;/&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;${jdbc.url}&quot;/&gt; &lt;property name=&quot;user&quot; value=&quot;${jdbc.username}&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt; &lt;/bean&gt; &lt;!--jdbcæ¨¡æ¿å¯¹è±¡--&gt; &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt; &lt;/beans&gt; 07-JdbcTemplateåŸºæœ¬ä½¿ç”¨-å¸¸ç”¨æ“ä½œ-æ›´æ–°æ“ä½œ(åº”ç”¨)package com.itheima.test; import com.itheima.domain.Account; import org.junit.Test; import org.junit.runner.RunWith; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.jdbc.core.BeanPropertyRowMapper; import org.springframework.jdbc.core.JdbcTemplate; import org.springframework.test.context.ContextConfiguration; import org.springframework.test.context.junit4.SpringJUnit4ClassRunner; import java.util.List; @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) public class JdbcTemplateCRUDTest { @Autowired private JdbcTemplate jdbcTemplate; //ä¿®æ”¹æ›´æ–° @Test public void testUpdate(){ jdbcTemplate.update(&quot;update account set money=? where name=?&quot;,10000,&quot;tom&quot;); } //åˆ é™¤ @Test public void testDelete(){ jdbcTemplate.update(&quot;delete from account where name=?&quot;,&quot;tom&quot;); } } 08-JdbcTemplateåŸºæœ¬ä½¿ç”¨-å¸¸ç”¨æ“ä½œ-æŸ¥è¯¢æ“ä½œ(åº”ç”¨)package com.itheima.test; import com.itheima.domain.Account; import org.junit.Test; import org.junit.runner.RunWith; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.jdbc.core.BeanPropertyRowMapper; import org.springframework.jdbc.core.JdbcTemplate; import org.springframework.test.context.ContextConfiguration; import org.springframework.test.context.junit4.SpringJUnit4ClassRunner; import java.util.List; @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) public class JdbcTemplateCRUDTest { @Autowired private JdbcTemplate jdbcTemplate; //èšåˆæŸ¥è¯¢ @Test public void testQueryCount(){ Long count = jdbcTemplate.queryForObject(&quot;select count(*) from account&quot;, Long.class); System.out.println(count); } //æŸ¥è¯¢ä¸€ä¸ª @Test public void testQueryOne(){ Account account = jdbcTemplate.queryForObject(&quot;select * from account where name=?&quot;, new BeanPropertyRowMapper&lt;Account&gt;(Account.class), &quot;tom&quot;); System.out.println(account); } //æŸ¥è¯¢æ‰€æœ‰ @Test public void testQueryAll(){ List&lt;Account&gt; accountList = jdbcTemplate.query(&quot;select * from account&quot;, new BeanPropertyRowMapper&lt;Account&gt;(Account.class)); System.out.println(accountList); } } 09-JdbcTemplateåŸºæœ¬ä½¿ç”¨-çŸ¥è¯†è¦ç‚¹(ç†è§£ï¼Œè®°å¿†)â‘ å¯¼å…¥spring-jdbcå’Œspring-txåæ ‡ â‘¡åˆ›å»ºæ•°æ®åº“è¡¨å’Œå®ä½“ â‘¢åˆ›å»ºJdbcTemplateå¯¹è±¡ JdbcTemplate jdbcTemplate = newJdbcTemplate(); jdbcTemplate.setDataSource(dataSource); â‘£æ‰§è¡Œæ•°æ®åº“æ“ä½œ æ›´æ–°æ“ä½œï¼š jdbcTemplate.update (sql,params) æŸ¥è¯¢æ“ä½œï¼š jdbcTemplate.query (sql,Mapper,params) jdbcTemplate.queryForObject(sql,Mapper,params) å£°æ˜å¼äº‹åŠ¡æ§åˆ¶1. ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶ç›¸å…³å¯¹è±¡1.1 PlatformTransactionManagerPlatformTransactionManager æ¥å£æ˜¯ spring çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œå®ƒé‡Œé¢æä¾›äº†æˆ‘ä»¬å¸¸ç”¨çš„æ“ä½œäº‹åŠ¡çš„æ–¹æ³•ã€‚ æ³¨æ„ï¼š PlatformTransactionManager æ˜¯æ¥å£ç±»å‹ï¼Œä¸åŒçš„ Dao å±‚æŠ€æœ¯åˆ™æœ‰ä¸åŒçš„å®ç°ç±»ï¼Œä¾‹å¦‚ï¼šDao å±‚æŠ€æœ¯æ˜¯jdbc æˆ– mybatis æ—¶ï¼šorg.springframework.jdbc.datasource.DataSourceTransactionManager Dao å±‚æŠ€æœ¯æ˜¯hibernateæ—¶ï¼šorg.springframework.orm.hibernate5.HibernateTransactionManager 1.2 TransactionDefinitionTransactionDefinition æ˜¯äº‹åŠ¡çš„å®šä¹‰ä¿¡æ¯å¯¹è±¡ï¼Œé‡Œé¢æœ‰å¦‚ä¸‹æ–¹æ³•ï¼š 1. äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œå¯ä»¥è§£å†³äº‹åŠ¡å¹¶å‘äº§ç”Ÿçš„é—®é¢˜ï¼Œå¦‚è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œè™šè¯»ã€‚ ISOLATION_DEFAULT ISOLATION_READ_UNCOMMITTED ISOLATION_READ_COMMITTED ISOLATION_REPEATABLE_READ ISOLATION_SERIALIZABLE 2. äº‹åŠ¡ä¼ æ’­è¡Œä¸º REQUIREDï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå·²ç»å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŠ å…¥åˆ°è¿™ä¸ªäº‹åŠ¡ä¸­ã€‚ä¸€èˆ¬çš„é€‰æ‹©ï¼ˆé»˜è®¤å€¼ï¼‰ SUPPORTSï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼ˆæ²¡æœ‰äº‹åŠ¡ï¼‰ MANDATORYï¼šä½¿ç”¨å½“å‰çš„äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ REQUERS_NEWï¼šæ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰åœ¨äº‹åŠ¡ä¸­ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚ NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ· NEVERï¼šä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŠ›å‡ºå¼‚å¸¸ NESTEDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡Œ REQUIRED ç±»ä¼¼çš„æ“ä½œ è¶…æ—¶æ—¶é—´ï¼šé»˜è®¤å€¼æ˜¯-1ï¼Œæ²¡æœ‰è¶…æ—¶é™åˆ¶ã€‚å¦‚æœæœ‰ï¼Œä»¥ç§’ä¸ºå•ä½è¿›è¡Œè®¾ç½® æ˜¯å¦åªè¯»ï¼šå»ºè®®æŸ¥è¯¢æ—¶è®¾ç½®ä¸ºåªè¯» 1.3 TransactionStatusTransactionStatus æ¥å£æä¾›çš„æ˜¯äº‹åŠ¡å…·ä½“çš„è¿è¡ŒçŠ¶æ€ï¼Œæ–¹æ³•ä»‹ç»å¦‚ä¸‹ã€‚ 1.4 çŸ¥è¯†è¦ç‚¹ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶ä¸‰å¤§å¯¹è±¡ PlatformTransactionManager TransactionDefinition TransactionStatus 2 åŸºäº XML çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶2.1 ä»€ä¹ˆæ˜¯å£°æ˜å¼äº‹åŠ¡æ§åˆ¶Spring çš„å£°æ˜å¼äº‹åŠ¡é¡¾åæ€ä¹‰å°±æ˜¯é‡‡ç”¨å£°æ˜çš„æ–¹å¼æ¥å¤„ç†äº‹åŠ¡ã€‚è¿™é‡Œæ‰€è¯´çš„å£°æ˜ï¼Œå°±æ˜¯æŒ‡åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜ï¼Œç”¨åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å£°æ˜å¼çš„å¤„ç†äº‹åŠ¡æ¥ä»£æ›¿ä»£ç å¼çš„å¤„ç†äº‹åŠ¡ã€‚ å£°æ˜å¼äº‹åŠ¡å¤„ç†çš„ä½œç”¨ äº‹åŠ¡ç®¡ç†ä¸ä¾µå…¥å¼€å‘çš„ç»„ä»¶ã€‚å…·ä½“æ¥è¯´ï¼Œä¸šåŠ¡é€»è¾‘å¯¹è±¡å°±ä¸ä¼šæ„è¯†åˆ°æ­£åœ¨äº‹åŠ¡ç®¡ç†ä¹‹ä¸­ï¼Œäº‹å®ä¸Šä¹Ÿåº”è¯¥å¦‚æ­¤ï¼Œå› ä¸ºäº‹åŠ¡ç®¡ç†æ˜¯å±äºç³»ç»Ÿå±‚é¢çš„æœåŠ¡ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœæƒ³è¦æ”¹å˜äº‹åŠ¡ç®¡ç†ç­–åˆ’çš„è¯ï¼Œä¹Ÿåªéœ€è¦åœ¨å®šä¹‰æ–‡ä»¶ä¸­é‡æ–°é…ç½®å³å¯ åœ¨ä¸éœ€è¦äº‹åŠ¡ç®¡ç†çš„æ—¶å€™ï¼Œåªè¦åœ¨è®¾å®šæ–‡ä»¶ä¸Šä¿®æ”¹ä¸€ä¸‹ï¼Œå³å¯ç§»å»äº‹åŠ¡ç®¡ç†æœåŠ¡ï¼Œæ— éœ€æ”¹å˜ä»£ç é‡æ–°ç¼–è¯‘ï¼Œè¿™æ ·ç»´æŠ¤èµ·æ¥æå…¶æ–¹ä¾¿ æ³¨æ„ï¼šSpring å£°æ˜å¼äº‹åŠ¡æ§åˆ¶åº•å±‚å°±æ˜¯AOPã€‚ 2.2 å£°æ˜å¼äº‹åŠ¡æ§åˆ¶çš„å®ç°å£°æ˜å¼äº‹åŠ¡æ§åˆ¶æ˜ç¡®äº‹é¡¹ï¼š è°æ˜¯åˆ‡ç‚¹ï¼Ÿ è°æ˜¯é€šçŸ¥ï¼Ÿ é…ç½®åˆ‡é¢ï¼Ÿ â‘ å¼•å…¥txå‘½åç©ºé—´ &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; â‘¡é…ç½®äº‹åŠ¡å¢å¼º &lt;!--å¹³å°äº‹åŠ¡ç®¡ç†å™¨--&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--äº‹åŠ¡å¢å¼ºé…ç½®--&gt; &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt; &lt;tx:attributes&gt; &lt;tx:method name=&quot;*&quot;/&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; â‘¢é…ç½®äº‹åŠ¡ AOP ç»‡å…¥ &lt;!--äº‹åŠ¡çš„aopå¢å¼º--&gt; &lt;aop:config&gt; &lt;aop:pointcut id=&quot;myPointcut&quot; expression=&quot;execution(* com.itheima.service.impl.*.*(..))&quot;/&gt; &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;myPointcut&quot;&gt;&lt;/aop:advisor&gt; &lt;/aop:config&gt; â‘£æµ‹è¯•äº‹åŠ¡æ§åˆ¶è½¬è´¦ä¸šåŠ¡ä»£ç  @Override public void transfer(String outMan, String inMan, double money) { accountDao.out(outMan,money); int i = 1/0; accountDao.in(inMan,money); } 2.3 åˆ‡ç‚¹æ–¹æ³•çš„äº‹åŠ¡å‚æ•°çš„é…ç½®&lt;!--äº‹åŠ¡å¢å¼ºé…ç½®--&gt; &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt; &lt;tx:attributes&gt; &lt;tx:method name=&quot;*&quot;/&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; å…¶ä¸­ï¼Œtx:method ä»£è¡¨åˆ‡ç‚¹æ–¹æ³•çš„äº‹åŠ¡å‚æ•°çš„é…ç½®ï¼Œä¾‹å¦‚ï¼š &lt;tx:method name=&quot;transfer&quot; isolation=&quot;REPEATABLE_READ&quot; propagation=&quot;REQUIRED&quot; timeout=&quot;-1&quot; read-only=&quot;false&quot;/&gt; nameï¼šåˆ‡ç‚¹æ–¹æ³•åç§° isolation:äº‹åŠ¡çš„éš”ç¦»çº§åˆ« propogationï¼šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º timeoutï¼šè¶…æ—¶æ—¶é—´ read-onlyï¼šæ˜¯å¦åªè¯» 2.4 çŸ¥è¯†è¦ç‚¹å£°æ˜å¼äº‹åŠ¡æ§åˆ¶çš„é…ç½®è¦ç‚¹ å¹³å°äº‹åŠ¡ç®¡ç†å™¨é…ç½® äº‹åŠ¡é€šçŸ¥çš„é…ç½® äº‹åŠ¡aopç»‡å…¥çš„é…ç½® 3 åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶3.1 ä½¿ç”¨æ³¨è§£é…ç½®å£°æ˜å¼äº‹åŠ¡æ§åˆ¶ ç¼–å†™ AccoutDao @Repository(&quot;accountDao&quot;) public class AccountDaoImpl implements AccountDao { @Autowired private JdbcTemplate jdbcTemplate; public void out(String outMan, double money) { jdbcTemplate.update(&quot;update account set money=money-? where name=?&quot;,money,outMan); } public void in(String inMan, double money) { jdbcTemplate.update(&quot;update account set money=money+? where name=?&quot;,money,inMan); } } ç¼–å†™ AccoutService @Service(&quot;accountService&quot;) @Transactional public class AccountServiceImpl implements AccountService { @Autowired private AccountDao accountDao; @Transactional(isolation = Isolation.READ_COMMITTED,propagation = Propagation.REQUIRED) public void transfer(String outMan, String inMan, double money) { accountDao.out(outMan,money); int i = 1/0; accountDao.in(inMan,money); } } ç¼–å†™ applicationContext.xml é…ç½®æ–‡ä»¶ &lt;!â€”ä¹‹å‰çœç•¥datsSourceã€jdbcTemplateã€å¹³å°äº‹åŠ¡ç®¡ç†å™¨çš„é…ç½®--&gt; &lt;!--ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.itheima&quot;/&gt; &lt;!--äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨--&gt; &lt;tx:annotation-driven/&gt; 3.2 æ³¨è§£é…ç½®å£°æ˜å¼äº‹åŠ¡æ§åˆ¶è§£æâ‘ ä½¿ç”¨ @Transactional åœ¨éœ€è¦è¿›è¡Œäº‹åŠ¡æ§åˆ¶çš„ç±»æˆ–æ˜¯æ–¹æ³•ä¸Šä¿®é¥°ï¼Œæ³¨è§£å¯ç”¨çš„å±æ€§åŒ xml é…ç½®æ–¹å¼ï¼Œä¾‹å¦‚éš”ç¦»çº§åˆ«ã€ä¼ æ’­è¡Œä¸ºç­‰ã€‚ â‘¡æ³¨è§£ä½¿ç”¨åœ¨ç±»ä¸Šï¼Œé‚£ä¹ˆè¯¥ç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•éƒ½ä½¿ç”¨åŒä¸€å¥—æ³¨è§£å‚æ•°é…ç½®ã€‚ â‘¢ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œä¸åŒçš„æ–¹æ³•å¯ä»¥é‡‡ç”¨ä¸åŒçš„äº‹åŠ¡å‚æ•°é…ç½®ã€‚ â‘£Xmlé…ç½®æ–‡ä»¶ä¸­è¦å¼€å¯äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨&lt;tx:annotation-driven /&gt; 3.3 çŸ¥è¯†è¦ç‚¹æ³¨è§£å£°æ˜å¼äº‹åŠ¡æ§åˆ¶çš„é…ç½®è¦ç‚¹ å¹³å°äº‹åŠ¡ç®¡ç†å™¨é…ç½®ï¼ˆxmlæ–¹å¼ï¼‰ äº‹åŠ¡é€šçŸ¥çš„é…ç½®ï¼ˆ@Transactionalæ³¨è§£é…ç½®ï¼‰ äº‹åŠ¡æ³¨è§£é©±åŠ¨çš„é…ç½® tx:annotation-driven/","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"https://lingdas.github.io/tags/springboot/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}]},{"title":"SpringIoCå’ŒDIæ³¨è§£å¼€å‘","slug":"02-SpringIoCå’ŒDIæ³¨è§£å¼€å‘","date":"2021-06-14T01:42:14.000Z","updated":"2021-06-16T06:40:24.000Z","comments":true,"path":"2021/06/14/02-SpringIoCå’ŒDIæ³¨è§£å¼€å‘/","link":"","permalink":"https://lingdas.github.io/2021/06/14/02-SpringIoCå’ŒDIæ³¨è§£å¼€å‘/","excerpt":"","text":"1.Springé…ç½®æ•°æ®æº1.1 æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰çš„ä½œç”¨æ•°æ®æº(è¿æ¥æ± )æ˜¯æé«˜ç¨‹åºæ€§èƒ½å¦‚å‡ºç°çš„ äº‹å…ˆå®ä¾‹åŒ–æ•°æ®æºï¼Œåˆå§‹åŒ–éƒ¨åˆ†è¿æ¥èµ„æº ä½¿ç”¨è¿æ¥èµ„æºæ—¶ä»æ•°æ®æºä¸­è·å– ä½¿ç”¨å®Œæ¯•åå°†è¿æ¥èµ„æºå½’è¿˜ç»™æ•°æ®æº å¸¸è§çš„æ•°æ®æº(è¿æ¥æ± )ï¼šDBCPã€C3P0ã€BoneCPã€Druidç­‰ å¼€å‘æ­¥éª¤ â‘ å¯¼å…¥æ•°æ®æºçš„åæ ‡å’Œæ•°æ®åº“é©±åŠ¨åæ ‡ â‘¡åˆ›å»ºæ•°æ®æºå¯¹è±¡ â‘¢è®¾ç½®æ•°æ®æºçš„åŸºæœ¬è¿æ¥æ•°æ® â‘£ä½¿ç”¨æ•°æ®æºè·å–è¿æ¥èµ„æºå’Œå½’è¿˜è¿æ¥èµ„æº 1.2 æ•°æ®æºçš„æ‰‹åŠ¨åˆ›å»ºâ‘ å¯¼å…¥c3p0å’Œdruidçš„åæ ‡ &lt;!-- C3P0è¿æ¥æ±  --&gt; &lt;dependency&gt; &lt;groupId&gt;c3p0&lt;/groupId&gt; &lt;artifactId&gt;c3p0&lt;/artifactId&gt; &lt;version&gt;0.9.1.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Druidè¿æ¥æ±  --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.10&lt;/version&gt; &lt;/dependency&gt; â‘ å¯¼å…¥mysqlæ•°æ®åº“é©±åŠ¨åæ ‡ &lt;!-- mysqlé©±åŠ¨ --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.39&lt;/version&gt; &lt;/dependency&gt; â‘¡åˆ›å»ºC3P0è¿æ¥æ±  @Test public void testC3P0() throws Exception { //åˆ›å»ºæ•°æ®æº ComboPooledDataSource dataSource = new ComboPooledDataSource(); //è®¾ç½®æ•°æ®åº“è¿æ¥å‚æ•° dataSource.setDriverClass(&quot;com.mysql.jdbc.Driver&quot;); dataSource.setJdbcUrl(&quot;jdbc:mysql://localhost:3306/test&quot;); dataSource.setUser(&quot;root&quot;); dataSource.setPassword(&quot;root&quot;); //è·å¾—è¿æ¥å¯¹è±¡ Connection connection = dataSource.getConnection(); System.out.println(connection); } â‘¡åˆ›å»ºDruidè¿æ¥æ±  @Test public void testDruid() throws Exception { //åˆ›å»ºæ•°æ®æº DruidDataSource dataSource = new DruidDataSource(); //è®¾ç½®æ•°æ®åº“è¿æ¥å‚æ•° dataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;); dataSource.setUrl(&quot;jdbc:mysql://localhost:3306/test&quot;); dataSource.setUsername(&quot;root&quot;); dataSource.setPassword(&quot;root&quot;); //è·å¾—è¿æ¥å¯¹è±¡ Connection connection = dataSource.getConnection(); System.out.println(connection); } â‘¢æå–jdbc.propertiesé…ç½®æ–‡ä»¶ jdbc.driver=com.mysql.jdbc.Driver jdbc.url=jdbc:mysql://localhost:3306/test jdbc.username=root jdbc.password=root â‘£è¯»å–jdbc.propertiesé…ç½®æ–‡ä»¶åˆ›å»ºè¿æ¥æ±  @Test public void testC3P0ByProperties() throws Exception { //åŠ è½½ç±»è·¯å¾„ä¸‹çš„jdbc.properties ResourceBundle rb = ResourceBundle.getBundle(&quot;jdbc&quot;); ComboPooledDataSource dataSource = new ComboPooledDataSource(); dataSource.setDriverClass(rb.getString(&quot;jdbc.driver&quot;)); dataSource.setJdbcUrl(rb.getString(&quot;jdbc.url&quot;)); dataSource.setUser(rb.getString(&quot;jdbc.username&quot;)); dataSource.setPassword(rb.getString(&quot;jdbc.password&quot;)); Connection connection = dataSource.getConnection(); System.out.println(connection); } 1.3 Springé…ç½®æ•°æ®æºå¯ä»¥å°†DataSourceçš„åˆ›å»ºæƒäº¤ç”±Springå®¹å™¨å»å®Œæˆ DataSourceæœ‰æ— å‚æ„é€ æ–¹æ³•ï¼Œè€ŒSpringé»˜è®¤å°±æ˜¯é€šè¿‡æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡çš„ DataSourceè¦æƒ³ä½¿ç”¨éœ€è¦é€šè¿‡setæ–¹æ³•è®¾ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œè€ŒSpringå¯ä»¥é€šè¿‡setæ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²æ³¨å…¥ &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/test&quot;/&gt; &lt;property name=&quot;user&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt; &lt;/bean&gt; æµ‹è¯•ä»å®¹å™¨å½“ä¸­è·å–æ•°æ®æº ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); DataSource dataSource = (DataSource) applicationContext.getBean(&quot;dataSource&quot;); Connection connection = dataSource.getConnection(); System.out.println(connection); 1.4 æŠ½å–jdbcé…ç½®æ–‡ä»¶applicationContext.xmlåŠ è½½jdbc.propertiesé…ç½®æ–‡ä»¶è·å¾—è¿æ¥ä¿¡æ¯ã€‚ é¦–å…ˆï¼Œéœ€è¦å¼•å…¥contextå‘½åç©ºé—´å’Œçº¦æŸè·¯å¾„ï¼š å‘½åç©ºé—´ï¼šxmlns:context=â€http://www.springframework.org/schema/context&quot; çº¦æŸè·¯å¾„ï¼šhttp://www.springframework.org/schema/contextâ€‹ â€‹ http://www.springframework.org/schema/context/spring-context.xsd &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;${jdbc.driver}&quot;/&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;${jdbc.url}&quot;/&gt; &lt;property name=&quot;user&quot; value=&quot;${jdbc.username}&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt; &lt;/bean&gt; 1.5 çŸ¥è¯†è¦ç‚¹Springå®¹å™¨åŠ è½½propertiesæ–‡ä»¶ &lt;context:property-placeholder location=&quot;xx.properties&quot;/&gt; &lt;property name=&quot;&quot; value=&quot;${key}&quot;/&gt; 2. Springæ³¨è§£å¼€å‘2.1 SpringåŸå§‹æ³¨è§£Springæ˜¯è½»ä»£ç è€Œé‡é…ç½®çš„æ¡†æ¶ï¼Œé…ç½®æ¯”è¾ƒç¹é‡ï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œæ‰€ä»¥æ³¨è§£å¼€å‘æ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œæ³¨è§£ä»£æ›¿xmlé…ç½®æ–‡ä»¶å¯ä»¥ç®€åŒ–é…ç½®ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ SpringåŸå§‹æ³¨è§£ä¸»è¦æ˜¯æ›¿ä»£çš„é…ç½® æ³¨è§£ è¯´æ˜ @Component ä½¿ç”¨åœ¨ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean @Controller ä½¿ç”¨åœ¨webå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean @Service ä½¿ç”¨åœ¨serviceå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean @Repository ä½¿ç”¨åœ¨daoå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean @Autowired ä½¿ç”¨åœ¨å­—æ®µä¸Šç”¨äºæ ¹æ®ç±»å‹ä¾èµ–æ³¨å…¥ @Qualifier ç»“åˆ@Autowiredä¸€èµ·ä½¿ç”¨ç”¨äºæ ¹æ®åç§°è¿›è¡Œä¾èµ–æ³¨å…¥ @Resource ç›¸å½“äº@Autowired+@Qualifierï¼ŒæŒ‰ç…§åç§°è¿›è¡Œæ³¨å…¥ @Value æ³¨å…¥æ™®é€šå±æ€§ @Scope æ ‡æ³¨Beançš„ä½œç”¨èŒƒå›´ @PostConstruct ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„åˆå§‹åŒ–æ–¹æ³• @PreDestroy ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„é”€æ¯æ–¹æ³• æ³¨æ„ï¼š ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘æ—¶ï¼Œéœ€è¦åœ¨applicationContext.xmlä¸­é…ç½®ç»„ä»¶æ‰«æï¼Œä½œç”¨æ˜¯æŒ‡å®šå“ªä¸ªåŒ…åŠå…¶å­åŒ…ä¸‹çš„Beanéœ€è¦è¿›è¡Œæ‰«æä»¥ä¾¿è¯†åˆ«ä½¿ç”¨æ³¨è§£é…ç½®çš„ç±»ã€å­—æ®µå’Œæ–¹æ³•ã€‚ &lt;!--æ³¨è§£çš„ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.itheima&quot;&gt;&lt;/context:component-scan&gt; ä½¿ç”¨@Compontæˆ–@Repositoryæ ‡è¯†UserDaoImpléœ€è¦Springè¿›è¡Œå®ä¾‹åŒ–ã€‚ //@Component(&quot;userDao&quot;) @Repository(&quot;userDao&quot;) public class UserDaoImpl implements UserDao { @Override public void save() { System.out.println(&quot;save running... ...&quot;); } } ä½¿ç”¨@Compontæˆ–@Serviceæ ‡è¯†UserServiceImpléœ€è¦Springè¿›è¡Œå®ä¾‹åŒ– ä½¿ç”¨@Autowiredæˆ–è€…@Autowired+@Qulifieræˆ–è€…@Resourceè¿›è¡ŒuserDaoçš„æ³¨å…¥ //@Component(&quot;userService&quot;) @Service(&quot;userService&quot;) public class UserServiceImpl implements UserService { /*@Autowired @Qualifier(&quot;userDao&quot;)*/ @Resource(name=&quot;userDao&quot;) private UserDao userDao; @Override public void save() { userDao.save(); } } ä½¿ç”¨@Valueè¿›è¡Œå­—ç¬¦ä¸²çš„æ³¨å…¥ @Repository(&quot;userDao&quot;) public class UserDaoImpl implements UserDao { @Value(&quot;æ³¨å…¥æ™®é€šæ•°æ®&quot;) private String str; @Value(&quot;${jdbc.driver}&quot;) private String driver; @Override public void save() { System.out.println(str); System.out.println(driver); System.out.println(&quot;save running... ...&quot;); } } ä½¿ç”¨@Scopeæ ‡æ³¨Beançš„èŒƒå›´ //@Scope(&quot;prototype&quot;) @Scope(&quot;singleton&quot;) public class UserDaoImpl implements UserDao { //æ­¤å¤„çœç•¥ä»£ç  } ä½¿ç”¨@PostConstructæ ‡æ³¨åˆå§‹åŒ–æ–¹æ³•ï¼Œä½¿ç”¨@PreDestroyæ ‡æ³¨é”€æ¯æ–¹æ³• @PostConstruct public void init(){ System.out.println(&quot;åˆå§‹åŒ–æ–¹æ³•....&quot;); } @PreDestroy public void destroy(){ System.out.println(&quot;é”€æ¯æ–¹æ³•.....&quot;); } 2.2 Springæ–°æ³¨è§£ä½¿ç”¨ä¸Šé¢çš„æ³¨è§£è¿˜ä¸èƒ½å…¨éƒ¨æ›¿ä»£xmlé…ç½®æ–‡ä»¶ï¼Œè¿˜éœ€è¦ä½¿ç”¨æ³¨è§£æ›¿ä»£çš„é…ç½®å¦‚ä¸‹ï¼š éè‡ªå®šä¹‰çš„Beançš„é…ç½®ï¼š åŠ è½½propertiesæ–‡ä»¶çš„é…ç½®ï¼šcontext:property-placeholder ç»„ä»¶æ‰«æçš„é…ç½®ï¼šcontext:component-scan å¼•å…¥å…¶ä»–æ–‡ä»¶ï¼š æ³¨è§£ è¯´æ˜ @Configuration ç”¨äºæŒ‡å®šå½“å‰ç±»æ˜¯ä¸€ä¸ª Spring é…ç½®ç±»ï¼Œå½“åˆ›å»ºå®¹å™¨æ—¶ä¼šä»è¯¥ç±»ä¸ŠåŠ è½½æ³¨è§£ @ComponentScan ç”¨äºæŒ‡å®š Spring åœ¨åˆå§‹åŒ–å®¹å™¨æ—¶è¦æ‰«æçš„åŒ…ã€‚ ä½œç”¨å’Œåœ¨ Spring çš„ xml é…ç½®æ–‡ä»¶ä¸­çš„ &lt;context:component-scan base-package=â€com.itheimaâ€/&gt;ä¸€æ · @Bean ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œæ ‡æ³¨å°†è¯¥æ–¹æ³•çš„è¿”å›å€¼å­˜å‚¨åˆ° Spring å®¹å™¨ä¸­ @PropertySource ç”¨äºåŠ è½½.properties æ–‡ä»¶ä¸­çš„é…ç½® @Import ç”¨äºå¯¼å…¥å…¶ä»–é…ç½®ç±» @Configuration @ComponentScan @Import @Configuration @ComponentScan(&quot;com.itheima&quot;) @Import({DataSourceConfiguration.class}) public class SpringConfiguration { } @PropertySource @value @PropertySource(&quot;classpath:jdbc.properties&quot;) public class DataSourceConfiguration { @Value(&quot;${jdbc.driver}&quot;) private String driver; @Value(&quot;${jdbc.url}&quot;) private String url; @Value(&quot;${jdbc.username}&quot;) private String username; @Value(&quot;${jdbc.password}&quot;) private String password; @Bean @Bean(name=&quot;dataSource&quot;) public DataSource getDataSource() throws PropertyVetoException { ComboPooledDataSource dataSource = new ComboPooledDataSource(); dataSource.setDriverClass(driver); dataSource.setJdbcUrl(url); dataSource.setUser(username); dataSource.setPassword(password); return dataSource; } æµ‹è¯•åŠ è½½æ ¸å¿ƒé…ç½®ç±»åˆ›å»ºSpringå®¹å™¨ @Test public void testAnnoConfiguration() throws Exception { ApplicationContext applicationContext = new AnnotationConfigApplicationContext(SpringConfiguration.class); UserService userService = (UserService) applicationContext.getBean(&quot;userService&quot;); userService.save(); DataSource dataSource = (DataSource) applicationContext.getBean(&quot;dataSource&quot;); Connection connection = dataSource.getConnection(); System.out.println(connection); } 3. Springæ•´åˆJunit3.1 åŸå§‹Junitæµ‹è¯•Springçš„é—®é¢˜åœ¨æµ‹è¯•ç±»ä¸­ï¼Œæ¯ä¸ªæµ‹è¯•æ–¹æ³•éƒ½æœ‰ä»¥ä¸‹ä¸¤è¡Œä»£ç ï¼š ApplicationContext ac = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;); IAccountService as = ac.getBean(&quot;accountService&quot;,IAccountService.class); è¿™ä¸¤è¡Œä»£ç çš„ä½œç”¨æ˜¯è·å–å®¹å™¨ï¼Œå¦‚æœä¸å†™çš„è¯ï¼Œç›´æ¥ä¼šæç¤ºç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚æ‰€ä»¥åˆä¸èƒ½è½»æ˜“åˆ æ‰ã€‚ 3.2 ä¸Šè¿°é—®é¢˜è§£å†³æ€è·¯è®©SpringJunitè´Ÿè´£åˆ›å»ºSpringå®¹å™¨ï¼Œä½†æ˜¯éœ€è¦å°†é…ç½®æ–‡ä»¶çš„åç§°å‘Šè¯‰å®ƒ å°†éœ€è¦è¿›è¡Œæµ‹è¯•Beanç›´æ¥åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæ³¨å…¥ 3.3 Springé›†æˆJunitæ­¥éª¤â‘ å¯¼å…¥springé›†æˆJunitçš„åæ ‡ â‘¡ä½¿ç”¨@Runwithæ³¨è§£æ›¿æ¢åŸæ¥çš„è¿è¡ŒæœŸ â‘¢ä½¿ç”¨@ContextConfigurationæŒ‡å®šé…ç½®æ–‡ä»¶æˆ–é…ç½®ç±» â‘£ä½¿ç”¨@Autowiredæ³¨å…¥éœ€è¦æµ‹è¯•çš„å¯¹è±¡ â‘¤åˆ›å»ºæµ‹è¯•æ–¹æ³•è¿›è¡Œæµ‹è¯• 3.4 Springé›†æˆJunitä»£ç å®ç°â‘ å¯¼å…¥springé›†æˆJunitçš„åæ ‡ &lt;!--æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œspring5 åŠä»¥ä¸Šç‰ˆæœ¬è¦æ±‚ junit çš„ç‰ˆæœ¬å¿…é¡»æ˜¯ 4.12 åŠä»¥ä¸Š--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.0.2.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; â‘¡ä½¿ç”¨@Runwithæ³¨è§£æ›¿æ¢åŸæ¥çš„è¿è¡ŒæœŸ @RunWith(SpringJUnit4ClassRunner.class) public class SpringJunitTest { } â‘¢ä½¿ç”¨@ContextConfigurationæŒ‡å®šé…ç½®æ–‡ä»¶æˆ–é…ç½®ç±» @RunWith(SpringJUnit4ClassRunner.class) //åŠ è½½springæ ¸å¿ƒé…ç½®æ–‡ä»¶ //@ContextConfiguration(value = {&quot;classpath:applicationContext.xml&quot;}) //åŠ è½½springæ ¸å¿ƒé…ç½®ç±» @ContextConfiguration(classes = {SpringConfiguration.class}) public class SpringJunitTest { } â‘£ä½¿ç”¨@Autowiredæ³¨å…¥éœ€è¦æµ‹è¯•çš„å¯¹è±¡ @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(classes = {SpringConfiguration.class}) public class SpringJunitTest { @Autowired private UserService userService; } â‘¤åˆ›å»ºæµ‹è¯•æ–¹æ³•è¿›è¡Œæµ‹è¯• @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(classes = {SpringConfiguration.class}) public class SpringJunitTest { @Autowired private UserService userService; @Test public void testUserService(){ userService.save(); } } Springé›†æˆJunitæ­¥éª¤ â‘ å¯¼å…¥springé›†æˆJunitçš„åæ ‡ â‘¡ä½¿ç”¨@Runwithæ³¨è§£æ›¿æ¢åŸæ¥çš„è¿è¡ŒæœŸ â‘¢ä½¿ç”¨@ContextConfigurationæŒ‡å®šé…ç½®æ–‡ä»¶æˆ–é…ç½®ç±» â‘£ä½¿ç”¨@Autowiredæ³¨å…¥éœ€è¦æµ‹è¯•çš„å¯¹è±¡ â‘¤åˆ›å»ºæµ‹è¯•æ–¹æ³•è¿›è¡Œæµ‹è¯•","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"https://lingdas.github.io/tags/springboot/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}]},{"title":"AOP","slug":"AOP","date":"2021-06-14T01:42:14.000Z","updated":"2021-06-16T06:40:19.000Z","comments":true,"path":"2021/06/14/AOP/","link":"","permalink":"https://lingdas.github.io/2021/06/14/AOP/","excerpt":"","text":"1.Spring çš„ AOP ç®€ä»‹1.1 ä»€ä¹ˆæ˜¯ AOPAOP ä¸º Aspect Oriented Programming çš„ç¼©å†™ï¼Œæ„æ€ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚ AOP æ˜¯ OOP çš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚ 1.2 AOP çš„ä½œç”¨åŠå…¶ä¼˜åŠ¿ä½œç”¨ï¼šåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹å¯¹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼º ä¼˜åŠ¿ï¼šå‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”ä¾¿äºç»´æŠ¤ 1.3 AOP çš„åº•å±‚å®ç°å®é™…ä¸Šï¼ŒAOP çš„åº•å±‚æ˜¯é€šè¿‡ Spring æä¾›çš„çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°çš„ã€‚åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯åŠ¨æ€çš„ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶è¿›è¡Œå¢å¼ºåŠŸèƒ½çš„ä»‹å…¥ï¼Œåœ¨å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œå®ŒæˆåŠŸèƒ½çš„å¢å¼ºã€‚ 1.4 AOP çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å¸¸ç”¨çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ JDK ä»£ç† : åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ cglib ä»£ç†ï¼šåŸºäºçˆ¶ç±»çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ 1.5 JDK çš„åŠ¨æ€ä»£ç†â‘ ç›®æ ‡ç±»æ¥å£ public interface TargetInterface { public void method(); } â‘¡ç›®æ ‡ç±» public class Target implements TargetInterface { @Override public void method() { System.out.println(&quot;Target running....&quot;); } } â‘¢åŠ¨æ€ä»£ç†ä»£ç  Target target = new Target(); //åˆ›å»ºç›®æ ‡å¯¹è±¡ //åˆ›å»ºä»£ç†å¯¹è±¡ TargetInterface proxy = (TargetInterface) Proxy.newProxyInstance(target.getClass() .getClassLoader(),target.getClass().getInterfaces(),new InvocationHandler() { @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { System.out.println(&quot;å‰ç½®å¢å¼ºä»£ç ...&quot;); Object invoke = method.invoke(target, args); System.out.println(&quot;åç½®å¢å¼ºä»£ç ...&quot;); return invoke; } } ); â‘£ è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æµ‹è¯• // æµ‹è¯•,å½“è°ƒç”¨æ¥å£çš„ä»»ä½•æ–¹æ³•æ—¶ï¼Œä»£ç†å¯¹è±¡çš„ä»£ç éƒ½æ— åºä¿®æ”¹ proxy.method(); 1.6 cglib çš„åŠ¨æ€ä»£ç†â‘ ç›®æ ‡ç±» public class Target { public void method() { System.out.println(&quot;Target running....&quot;); } } â‘¡åŠ¨æ€ä»£ç†ä»£ç  Target target = new Target(); //åˆ›å»ºç›®æ ‡å¯¹è±¡ Enhancer enhancer = new Enhancer(); //åˆ›å»ºå¢å¼ºå™¨ enhancer.setSuperclass(Target.class); //è®¾ç½®çˆ¶ç±» enhancer.setCallback(new MethodInterceptor() { //è®¾ç½®å›è°ƒ @Override public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable { System.out.println(&quot;å‰ç½®ä»£ç å¢å¼º....&quot;); Object invoke = method.invoke(target, objects); System.out.println(&quot;åç½®ä»£ç å¢å¼º....&quot;); return invoke; } }); Target proxy = (Target) enhancer.create(); //åˆ›å»ºä»£ç†å¯¹è±¡ â‘¢è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æµ‹è¯• //æµ‹è¯•,å½“è°ƒç”¨æ¥å£çš„ä»»ä½•æ–¹æ³•æ—¶ï¼Œä»£ç†å¯¹è±¡çš„ä»£ç éƒ½æ— åºä¿®æ”¹ proxy.method(); 1.7 AOP ç›¸å…³æ¦‚å¿µSpring çš„ AOP å®ç°åº•å±‚å°±æ˜¯å¯¹ä¸Šé¢çš„åŠ¨æ€ä»£ç†çš„ä»£ç è¿›è¡Œäº†å°è£…ï¼Œå°è£…åæˆ‘ä»¬åªéœ€è¦å¯¹éœ€è¦å…³æ³¨çš„éƒ¨åˆ†è¿›è¡Œä»£ç ç¼–å†™ï¼Œå¹¶é€šè¿‡é…ç½®çš„æ–¹å¼å®ŒæˆæŒ‡å®šç›®æ ‡çš„æ–¹æ³•å¢å¼ºã€‚ åœ¨æ­£å¼è®²è§£ AOP çš„æ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç†è§£ AOP çš„ç›¸å…³æœ¯è¯­ï¼Œå¸¸ç”¨çš„æœ¯è¯­å¦‚ä¸‹ï¼š Targetï¼ˆç›®æ ‡å¯¹è±¡ï¼‰ï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡ Proxy ï¼ˆä»£ç†ï¼‰ï¼šä¸€ä¸ªç±»è¢« AOP ç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±» Joinpointï¼ˆè¿æ¥ç‚¹ï¼‰ï¼šæ‰€è°“è¿æ¥ç‚¹æ˜¯æŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨springä¸­,è¿™äº›ç‚¹æŒ‡çš„æ˜¯æ–¹æ³•ï¼Œå› ä¸ºspringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰ï¼šæ‰€è°“åˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº› Joinpoint è¿›è¡Œæ‹¦æˆªçš„å®šä¹‰ Adviceï¼ˆé€šçŸ¥/ å¢å¼ºï¼‰ï¼šæ‰€è°“é€šçŸ¥æ˜¯æŒ‡æ‹¦æˆªåˆ° Joinpoint ä¹‹åæ‰€è¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥ Aspectï¼ˆåˆ‡é¢ï¼‰ï¼šæ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ï¼ˆå¼•ä»‹ï¼‰çš„ç»“åˆ Weavingï¼ˆç»‡å…¥ï¼‰ï¼šæ˜¯æŒ‡æŠŠå¢å¼ºåº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡æ¥åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚springé‡‡ç”¨åŠ¨æ€ä»£ç†ç»‡å…¥ï¼Œè€ŒAspectJé‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥ 1.8 AOP å¼€å‘æ˜ç¡®çš„äº‹é¡¹ 1.8 AOP å¼€å‘æ˜ç¡®çš„äº‹é¡¹ 1.8 AOP å¼€å‘æ˜ç¡®çš„äº‹é¡¹1)éœ€è¦ç¼–å†™çš„å†…å®¹ ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼ˆç›®æ ‡ç±»çš„ç›®æ ‡æ–¹æ³•ï¼‰ ç¼–å†™åˆ‡é¢ç±»ï¼Œåˆ‡é¢ç±»ä¸­æœ‰é€šçŸ¥(å¢å¼ºåŠŸèƒ½æ–¹æ³•) åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®ç»‡å…¥å…³ç³»ï¼Œå³å°†å“ªäº›é€šçŸ¥ä¸å“ªäº›è¿æ¥ç‚¹è¿›è¡Œç»“åˆ 2ï¼‰AOP æŠ€æœ¯å®ç°çš„å†…å®¹Spring æ¡†æ¶ç›‘æ§åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ‰§è¡Œã€‚ä¸€æ—¦ç›‘æ§åˆ°åˆ‡å…¥ç‚¹æ–¹æ³•è¢«è¿è¡Œï¼Œä½¿ç”¨ä»£ç†æœºåˆ¶ï¼ŒåŠ¨æ€åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œæ ¹æ®é€šçŸ¥ç±»åˆ«ï¼Œåœ¨ä»£ç†å¯¹è±¡çš„å¯¹åº”ä½ç½®ï¼Œå°†é€šçŸ¥å¯¹åº”çš„åŠŸèƒ½ç»‡å…¥ï¼Œå®Œæˆå®Œæ•´çš„ä»£ç é€»è¾‘è¿è¡Œã€‚ 3ï¼‰AOP åº•å±‚ä½¿ç”¨å“ªç§ä»£ç†æ–¹å¼åœ¨ spring ä¸­ï¼Œæ¡†æ¶ä¼šæ ¹æ®ç›®æ ‡ç±»æ˜¯å¦å®ç°äº†æ¥å£æ¥å†³å®šé‡‡ç”¨å“ªç§åŠ¨æ€ä»£ç†çš„æ–¹å¼ã€‚ 1.9 çŸ¥è¯†è¦ç‚¹ aopï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ aopåº•å±‚å®ç°ï¼šåŸºäºJDKçš„åŠ¨æ€ä»£ç† å’Œ åŸºäºCglibçš„åŠ¨æ€ä»£ç† aopçš„é‡ç‚¹æ¦‚å¿µï¼š Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰ï¼šè¢«å¢å¼ºçš„æ–¹æ³• Adviceï¼ˆé€šçŸ¥/ å¢å¼ºï¼‰ï¼šå°è£…å¢å¼ºä¸šåŠ¡é€»è¾‘çš„æ–¹æ³• Aspectï¼ˆåˆ‡é¢ï¼‰ï¼šåˆ‡ç‚¹+é€šçŸ¥ Weavingï¼ˆç»‡å…¥ï¼‰ï¼šå°†åˆ‡ç‚¹ä¸é€šçŸ¥ç»“åˆçš„è¿‡ç¨‹ å¼€å‘æ˜ç¡®äº‹é¡¹ï¼š è°æ˜¯åˆ‡ç‚¹ï¼ˆåˆ‡ç‚¹è¡¨è¾¾å¼é…ç½®ï¼‰ è°æ˜¯é€šçŸ¥ï¼ˆåˆ‡é¢ç±»ä¸­çš„å¢å¼ºæ–¹æ³•ï¼‰ å°†åˆ‡ç‚¹å’Œé€šçŸ¥è¿›è¡Œç»‡å…¥é…ç½® 2. åŸºäº XML çš„ AOP å¼€å‘2.1 å¿«é€Ÿå…¥é—¨â‘ å¯¼å…¥ AOP ç›¸å…³åæ ‡ â‘¡åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…éƒ¨æœ‰åˆ‡ç‚¹ï¼‰ â‘¢åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•ï¼‰ â‘£å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™ spring â‘¤åœ¨ applicationContext.xml ä¸­é…ç½®ç»‡å…¥å…³ç³» â‘¥æµ‹è¯•ä»£ç  â‘ å¯¼å…¥ AOP ç›¸å…³åæ ‡ &lt;!--å¯¼å…¥springçš„contextåæ ‡ï¼Œcontextä¾èµ–aop--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.0.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- aspectjçš„ç»‡å…¥ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.8.13&lt;/version&gt; &lt;/dependency&gt; â‘¡åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…éƒ¨æœ‰åˆ‡ç‚¹ï¼‰ public interface TargetInterface { public void method(); } public class Target implements TargetInterface { @Override public void method() { System.out.println(&quot;Target running....&quot;); } } â‘¢åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•ï¼‰ public class MyAspect { //å‰ç½®å¢å¼ºæ–¹æ³• public void before(){ System.out.println(&quot;å‰ç½®ä»£ç å¢å¼º.....&quot;); } } â‘£å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™ spring &lt;!--é…ç½®ç›®æ ‡ç±»--&gt; &lt;bean id=&quot;target&quot; class=&quot;com.itheima.aop.Target&quot;&gt;&lt;/bean&gt; &lt;!--é…ç½®åˆ‡é¢ç±»--&gt; &lt;bean id=&quot;myAspect&quot; class=&quot;com.itheima.aop.MyAspect&quot;&gt;&lt;/bean&gt; â‘¤åœ¨ applicationContext.xml ä¸­é…ç½®ç»‡å…¥å…³ç³» å¯¼å…¥aopå‘½åç©ºé—´ &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; â‘¤åœ¨ applicationContext.xml ä¸­é…ç½®ç»‡å…¥å…³ç³» é…ç½®åˆ‡ç‚¹è¡¨è¾¾å¼å’Œå‰ç½®å¢å¼ºçš„ç»‡å…¥å…³ç³» &lt;aop:config&gt; &lt;!--å¼•ç”¨myAspectçš„Beanä¸ºåˆ‡é¢å¯¹è±¡--&gt; &lt;aop:aspect ref=&quot;myAspect&quot;&gt; &lt;!--é…ç½®Targetçš„methodæ–¹æ³•æ‰§è¡Œæ—¶è¦è¿›è¡ŒmyAspectçš„beforeæ–¹æ³•å‰ç½®å¢å¼º--&gt; &lt;aop:before method=&quot;before&quot; pointcut=&quot;execution(public void com.itheima.aop.Target.method())&quot;&gt;&lt;/aop:before&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt; â‘¥æµ‹è¯•ä»£ç  @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) public class AopTest { @Autowired private TargetInterface target; @Test public void test1(){ target.method(); } } â‘¦æµ‹è¯•ç»“æœ 2.2 XML é…ç½® AOP è¯¦è§£1) åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•è¡¨è¾¾å¼è¯­æ³•ï¼š execution([ä¿®é¥°ç¬¦] è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°)) è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥ è¿”å›å€¼ç±»å‹ã€åŒ…åã€ç±»åã€æ–¹æ³•åå¯ä»¥ä½¿ç”¨æ˜Ÿå·* ä»£è¡¨ä»»æ„ åŒ…åä¸ç±»åä¹‹é—´ä¸€ä¸ªç‚¹ . ä»£è¡¨å½“å‰åŒ…ä¸‹çš„ç±»ï¼Œä¸¤ä¸ªç‚¹ .. è¡¨ç¤ºå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç±» å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç‚¹ .. è¡¨ç¤ºä»»æ„ä¸ªæ•°ï¼Œä»»æ„ç±»å‹çš„å‚æ•°åˆ—è¡¨ ä¾‹å¦‚ï¼š execution(public void com.itheima.aop.Target.method()) execution(void com.itheima.aop.Target.*(..)) execution(* com.itheima.aop.*.*(..)) execution(* com.itheima.aop..*.*(..)) execution(* *..*.*(..)) 2) é€šçŸ¥çš„ç±»å‹é€šçŸ¥çš„é…ç½®è¯­æ³•ï¼š &lt;aop:é€šçŸ¥ç±»å‹ method=â€œåˆ‡é¢ç±»ä¸­æ–¹æ³•åâ€ pointcut=â€œåˆ‡ç‚¹è¡¨è¾¾å¼&quot;&gt;&lt;/aop:é€šçŸ¥ç±»å‹&gt; 3) åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å–å½“å¤šä¸ªå¢å¼ºçš„åˆ‡ç‚¹è¡¨è¾¾å¼ç›¸åŒæ—¶ï¼Œå¯ä»¥å°†åˆ‡ç‚¹è¡¨è¾¾å¼è¿›è¡ŒæŠ½å–ï¼Œåœ¨å¢å¼ºä¸­ä½¿ç”¨ pointcut-ref å±æ€§ä»£æ›¿ pointcut å±æ€§æ¥å¼•ç”¨æŠ½å–åçš„åˆ‡ç‚¹è¡¨è¾¾å¼ã€‚ &lt;aop:config&gt; &lt;!--å¼•ç”¨myAspectçš„Beanä¸ºåˆ‡é¢å¯¹è±¡--&gt; &lt;aop:aspect ref=&quot;myAspect&quot;&gt; &lt;aop:pointcut id=&quot;myPointcut&quot; expression=&quot;execution(* com.itheima.aop.*.*(..))&quot;/&gt; &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;myPointcut&quot;&gt;&lt;/aop:before&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt; 2.3 çŸ¥è¯†è¦ç‚¹ aopç»‡å…¥çš„é…ç½® &lt;aop:config&gt; &lt;aop:aspect ref=â€œåˆ‡é¢ç±»â€&gt; &lt;aop:before method=â€œé€šçŸ¥æ–¹æ³•åç§°â€ pointcut=â€œåˆ‡ç‚¹è¡¨è¾¾å¼&quot;&gt;&lt;/aop:before&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt; é€šçŸ¥çš„ç±»å‹ï¼šå‰ç½®é€šçŸ¥ã€åç½®é€šçŸ¥ã€ç¯ç»•é€šçŸ¥ã€å¼‚å¸¸æŠ›å‡ºé€šçŸ¥ã€æœ€ç»ˆé€šçŸ¥ åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•ï¼š execution([ä¿®é¥°ç¬¦] è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°)) 3.åŸºäºæ³¨è§£çš„ AOP å¼€å‘3.1 å¿«é€Ÿå…¥é—¨åŸºäºæ³¨è§£çš„aopå¼€å‘æ­¥éª¤ï¼š â‘ åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…éƒ¨æœ‰åˆ‡ç‚¹ï¼‰ â‘¡åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•ï¼‰ â‘¢å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™ spring â‘£åœ¨åˆ‡é¢ç±»ä¸­ä½¿ç”¨æ³¨è§£é…ç½®ç»‡å…¥å…³ç³» â‘¤åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç»„ä»¶æ‰«æå’Œ AOP çš„è‡ªåŠ¨ä»£ç† â‘¥æµ‹è¯• â‘ åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…éƒ¨æœ‰åˆ‡ç‚¹ï¼‰ public interface TargetInterface { public void method(); } public class Target implements TargetInterface { @Override public void method() { System.out.println(&quot;Target running....&quot;); } } â‘¡åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•) public class MyAspect { //å‰ç½®å¢å¼ºæ–¹æ³• public void before(){ System.out.println(&quot;å‰ç½®ä»£ç å¢å¼º.....&quot;); } } â‘¢å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™ spring @Component(&quot;target&quot;) public class Target implements TargetInterface { @Override public void method() { System.out.println(&quot;Target running....&quot;); } } @Component(&quot;myAspect&quot;) public class MyAspect { public void before(){ System.out.println(&quot;å‰ç½®ä»£ç å¢å¼º.....&quot;); } } â‘£åœ¨åˆ‡é¢ç±»ä¸­ä½¿ç”¨æ³¨è§£é…ç½®ç»‡å…¥å…³ç³» @Component(&quot;myAspect&quot;) @Aspect public class MyAspect { @Before(&quot;execution(* com.itheima.aop.*.*(..))&quot;) public void before(){ System.out.println(&quot;å‰ç½®ä»£ç å¢å¼º.....&quot;); } } â‘¤åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç»„ä»¶æ‰«æå’Œ AOP çš„è‡ªåŠ¨ä»£ç† &lt;!--ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.itheima.aop&quot;/&gt; &lt;!--aopçš„è‡ªåŠ¨ä»£ç†--&gt; &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt; â‘¥æµ‹è¯•ä»£ç  @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) public class AopTest { @Autowired private TargetInterface target; @Test public void test1(){ target.method(); } } â‘¦æµ‹è¯•ç»“æœ 3.2 æ³¨è§£é…ç½® AOP è¯¦è§£1) æ³¨è§£é€šçŸ¥çš„ç±»å‹é€šçŸ¥çš„é…ç½®è¯­æ³•ï¼š@é€šçŸ¥æ³¨è§£(â€œåˆ‡ç‚¹è¡¨è¾¾å¼â€) 2) åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å–åŒ xmlé…ç½®aop ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–ã€‚æŠ½å–æ–¹å¼æ˜¯åœ¨åˆ‡é¢å†…å®šä¹‰æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸Šä½¿ç”¨@Pointcutæ³¨è§£å®šä¹‰åˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œç„¶ååœ¨åœ¨å¢å¼ºæ³¨è§£ä¸­è¿›è¡Œå¼•ç”¨ã€‚å…·ä½“å¦‚ä¸‹ï¼š @@Component(&quot;myAspect&quot;) @Aspect public class MyAspect { @Before(&quot;MyAspect.myPoint()&quot;) public void before(){ System.out.println(&quot;å‰ç½®ä»£ç å¢å¼º.....&quot;); } @Pointcut(&quot;execution(* com.itheima.aop.*.*(..))&quot;) public void myPoint(){} } 3.3 çŸ¥è¯†è¦ç‚¹ æ³¨è§£aopå¼€å‘æ­¥éª¤ â‘ ä½¿ç”¨@Aspectæ ‡æ³¨åˆ‡é¢ç±» â‘¡ä½¿ç”¨@é€šçŸ¥æ³¨è§£æ ‡æ³¨é€šçŸ¥æ–¹æ³• â‘¢åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®aopè‡ªåŠ¨ä»£ç†aop:aspectj-autoproxy/ é€šçŸ¥æ³¨è§£ç±»å‹","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"https://lingdas.github.io/tags/springboot/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}]},{"title":"hexoçš„å®‰è£…ä½¿ç”¨","slug":"hexo","date":"2021-06-14T01:42:14.000Z","updated":"2021-06-16T08:32:30.000Z","comments":true,"path":"2021/06/14/hexo/","link":"","permalink":"https://lingdas.github.io/2021/06/14/hexo/","excerpt":"","text":"å®‰è£…hexonpm install hexo-cli -g hexo ä½¿ç”¨æ–¹æ³•ç”Ÿæˆhexo å®˜æ–¹çš„ç®€å•ä¸»é¢˜ hexo init ç”Ÿæˆé™æ€é¡µé¢ hexo g è¿è¡ŒæœåŠ¡ hexo s éƒ¨ç½² npm install hexo-deployer-git --save hexo d ä¸€é”®éƒ¨ç½² hexo clean &amp;&amp; hexo g -d ç”¨githubåšå›¾åºŠ è®¿é—®çš„æ—¶å€™ç”¨è¿™ä¸ªé“¾æ¥åŠ é€Ÿ https://cdn.jsdelivr.net/gh/githubçš„åå­—/é¡¹ç›®åå­—/å…·ä½“å›¾ç‰‡è·¯å¾„ å¦‚ä¸‹é¢ æˆ‘çš„åå­—æ˜¯lingdas é¡¹ç›®æ˜¯note å…·ä½“è·¯å¾„ /img/7.jpg https://cdn.jsdelivr.net/gh/lingdas/note/img/7.jpg å®‰è£…çœ‹ç‰ˆå¨˜ npm install --save hexo-helper-live2d æ¨¡å‹ä¸‹è½½ npm install live2d-widget-model-tsumiki æ¨¡å‹åˆ—è¡¨ live2d-widget-model-chitose live2d-widget-model-epsilon2_1 live2d-widget-model-gf live2d-widget-model-haru/01 live2d-widget-model-haru/02 live2d-widget-model-haruto live2d-widget-model-hibiki live2d-widget-model-hijiki live2d-widget-model-izumi live2d-widget-model-koharu live2d-widget-model-miku live2d-widget-model-ni-j live2d-widget-model-nico live2d-widget-model-nietzsche live2d-widget-model-nipsilon live2d-widget-model-nito live2d-widget-model-shizuku live2d-widget-model-tororo live2d-widget-model-tsumiki live2d-widget-model-unitychan live2d-widget-model-wanko live2d-widget-model-z16 æ¨¡å‹é…ç½®ï¼ˆåœ¨æ ¹ç›®å½•åé¢åŠ ä¸Šè¿™ä¸ªé…ç½®ï¼‰ # Live2D ## https://github.com/EYHN/hexo-helper-live2d live2d: enable: true # enable: false scriptFrom: local # é»˜è®¤ pluginRootPath: live2dw/ # æ’ä»¶åœ¨ç«™ç‚¹ä¸Šçš„æ ¹ç›®å½•(ç›¸å¯¹è·¯å¾„) pluginJsPath: lib/ # è„šæœ¬æ–‡ä»¶ç›¸å¯¹ä¸æ’ä»¶æ ¹ç›®å½•è·¯å¾„ pluginModelPath: assets/ # æ¨¡å‹æ–‡ä»¶ç›¸å¯¹ä¸æ’ä»¶æ ¹ç›®å½•è·¯å¾„ # scriptFrom: jsdelivr # jsdelivr CDN # scriptFrom: unpkg # unpkg CDN # scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # ä½ çš„è‡ªå®šä¹‰ url tagMode: false # æ ‡ç­¾æ¨¡å¼, æ˜¯å¦ä»…æ›¿æ¢ live2d tagæ ‡ç­¾è€Œéæ’å…¥åˆ°æ‰€æœ‰é¡µé¢ä¸­ debug: false # è°ƒè¯•, æ˜¯å¦åœ¨æ§åˆ¶å°è¾“å‡ºæ—¥å¿— model: use: live2d-widget-model-haru scale: 1 hHeadPos: 0.5 vHeadPos: 0.618 # use: live2d-widget-model-wanko # npm-module package name # use: wanko # åšå®¢æ ¹ç›®å½•/live2d_models/ ä¸‹çš„ç›®å½•å # use: ./wives/wanko # ç›¸å¯¹äºåšå®¢æ ¹ç›®å½•çš„è·¯å¾„ # use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # ä½ çš„è‡ªå®šä¹‰ url display: superSample: 2 width: 280 height: 480 position: right hOffset: 0 vOffset: -20 mobile: show: true # æ˜¯å¦åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¾ç¤º scale: 0.5 # ç§»åŠ¨è®¾å¤‡ä¸Šçš„ç¼©æ”¾ react: opacityDefault: 0.7 opacityOnHover: 0.8 åœ¨æˆ‘ä»¬çš„Hexoæ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªlive2d_modelsæ–‡ä»¶å¤¹ï¼Œæ³¨æ„ï¼šæ–‡ä»¶å¤¹å¿…é¡»ä¸ºè¯¥åå­— æŠŠä¸‹è½½çš„æ¨¡å‹å¤åˆ¶åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ live2d_models","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://lingdas.github.io/tags/hexo/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}]},{"title":"SpringIoC&DI","slug":"springbootç¬”è®°","date":"2021-06-14T00:46:12.000Z","updated":"2021-06-16T06:40:12.000Z","comments":true,"path":"2021/06/14/springbootç¬”è®°/","link":"","permalink":"https://lingdas.github.io/2021/06/14/springbootç¬”è®°/","excerpt":"","text":"1. springæ¦‚è¿°1.1 Springæ˜¯ä»€ä¹ˆï¼ˆç†è§£ï¼‰Springæ˜¯åˆ†å±‚çš„ Java SE/EEåº”ç”¨ full-stack è½»é‡çº§å¼€æºæ¡†æ¶ï¼Œä»¥ IoCï¼ˆInverse Of Controlï¼šåè½¬æ§åˆ¶ï¼‰å’Œ AOPï¼ˆAspect Oriented Programmingï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ä¸ºå†…æ ¸ã€‚ æä¾›äº†å±•ç°å±‚ SpringMVCå’ŒæŒä¹…å±‚ Spring JDBCTemplateä»¥åŠä¸šåŠ¡å±‚äº‹åŠ¡ç®¡ç†ç­‰ä¼—å¤šçš„ä¼ä¸šçº§åº”ç”¨æŠ€æœ¯ï¼Œè¿˜èƒ½æ•´åˆå¼€æºä¸–ç•Œä¼—å¤šè‘—åçš„ç¬¬ä¸‰æ–¹æ¡†æ¶å’Œç±»åº“ï¼Œé€æ¸æˆä¸ºä½¿ç”¨æœ€å¤šçš„Java EE ä¼ä¸šåº”ç”¨å¼€æºæ¡†æ¶ 1.2 Springå‘å±•å†ç¨‹ ï¼ˆäº†è§£ï¼‰Rod Johnson ï¼ˆ Spring ä¹‹çˆ¶ï¼‰ 2017 å¹´9 æœˆä»½å‘å¸ƒäº† Spring çš„æœ€æ–°ç‰ˆæœ¬ Spring5.0é€šç”¨ç‰ˆï¼ˆGAï¼‰ 1.3 Springçš„ä¼˜åŠ¿ï¼ˆç†è§£ï¼‰æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ AOP ç¼–ç¨‹çš„æ”¯æŒ å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒ æ–¹ä¾¿ç¨‹åºçš„æµ‹è¯• 1.4 Springçš„ä½“ç³»ç»“æ„ï¼ˆäº†è§£ï¼‰ 2. springå¿«é€Ÿå…¥é—¨2.1 Springç¨‹åºå¼€å‘æ­¥éª¤â‘ å¯¼å…¥ Spring å¼€å‘çš„åŸºæœ¬åŒ…åæ ‡ â‘¡ç¼–å†™ Dao æ¥å£å’Œå®ç°ç±» â‘¢åˆ›å»º Spring æ ¸å¿ƒé…ç½®æ–‡ä»¶ â‘£åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­é…ç½® UserDaoImpl â‘¤ä½¿ç”¨ Spring çš„ API è·å¾— Bean å®ä¾‹ 2.2 å¯¼å…¥Springå¼€å‘çš„åŸºæœ¬åŒ…åæ ‡&lt;properties&gt; &lt;spring.version&gt;5.0.5.RELEASE&lt;/spring.version&gt; &lt;/properties&gt; &lt;!--å¯¼å…¥springçš„contextåæ ‡ï¼Œcontextä¾èµ–coreã€beansã€expression--&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; 2.3 ç¼–å†™Daoæ¥å£å’Œå®ç°ç±»public interface UserDao { public void save(); } public class UserDaoImpl implements UserDao { @Override public void save() { System.out.println(&quot;UserDao save method running....&quot;); } } 2.4 åˆ›å»ºSpringæ ¸å¿ƒé…ç½®æ–‡ä»¶åœ¨ç±»è·¯å¾„ä¸‹ï¼ˆresourcesï¼‰åˆ›å»ºapplicationContext.xmlé…ç½®æ–‡ä»¶ &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;/beans&gt; 2.5 åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®UserDaoImpl&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;&gt;&lt;/bean&gt; &lt;/beans&gt; 2.6 ä½¿ç”¨Springçš„APIè·å¾—Beanå®ä¾‹@Test public void test1(){ ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); UserDao userDao = (UserDao) applicationContext.getBean(&quot;userDao&quot;); userDao.save(); } 3. Springé…ç½®æ–‡ä»¶3.1 Beanæ ‡ç­¾åŸºæœ¬é…ç½®ç”¨äºé…ç½®å¯¹è±¡äº¤ç”±Spring æ¥åˆ›å»ºã€‚ é»˜è®¤æƒ…å†µä¸‹å®ƒè°ƒç”¨çš„æ˜¯ç±»ä¸­çš„æ— å‚æ„é€ å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰æ— å‚æ„é€ å‡½æ•°åˆ™ä¸èƒ½åˆ›å»ºæˆåŠŸã€‚ åŸºæœ¬å±æ€§ï¼š idï¼šBeanå®ä¾‹åœ¨Springå®¹å™¨ä¸­çš„å”¯ä¸€æ ‡è¯† classï¼šBeançš„å…¨é™å®šåç§° 3.2 Beanæ ‡ç­¾èŒƒå›´é…ç½®scope:æŒ‡å¯¹è±¡çš„ä½œç”¨èŒƒå›´ï¼Œå–å€¼å¦‚ä¸‹ï¼š å–å€¼èŒƒå›´ è¯´æ˜ singleton é»˜è®¤å€¼ï¼Œå•ä¾‹çš„ prototype å¤šä¾‹çš„ request WEB é¡¹ç›®ä¸­ï¼ŒSpring åˆ›å»ºä¸€ä¸ª Bean çš„å¯¹è±¡ï¼Œå°†å¯¹è±¡å­˜å…¥åˆ° request åŸŸä¸­ session WEB é¡¹ç›®ä¸­ï¼ŒSpring åˆ›å»ºä¸€ä¸ª Bean çš„å¯¹è±¡ï¼Œå°†å¯¹è±¡å­˜å…¥åˆ° session åŸŸä¸­ global session WEB é¡¹ç›®ä¸­ï¼Œåº”ç”¨åœ¨ Portlet ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰ Portlet ç¯å¢ƒé‚£ä¹ˆglobalSession ç›¸å½“äº session 1ï¼‰å½“scopeçš„å–å€¼ä¸ºsingletonæ—¶ â€‹ Beançš„å®ä¾‹åŒ–ä¸ªæ•°ï¼š1ä¸ª â€‹ Beançš„å®ä¾‹åŒ–æ—¶æœºï¼šå½“Springæ ¸å¿ƒæ–‡ä»¶è¢«åŠ è½½æ—¶ï¼Œå®ä¾‹åŒ–é…ç½®çš„Beanå®ä¾‹ â€‹ Beançš„ç”Ÿå‘½å‘¨æœŸï¼š å¯¹è±¡åˆ›å»ºï¼šå½“åº”ç”¨åŠ è½½ï¼Œåˆ›å»ºå®¹å™¨æ—¶ï¼Œå¯¹è±¡å°±è¢«åˆ›å»ºäº† å¯¹è±¡è¿è¡Œï¼šåªè¦å®¹å™¨åœ¨ï¼Œå¯¹è±¡ä¸€ç›´æ´»ç€ å¯¹è±¡é”€æ¯ï¼šå½“åº”ç”¨å¸è½½ï¼Œé”€æ¯å®¹å™¨æ—¶ï¼Œå¯¹è±¡å°±è¢«é”€æ¯äº† 2ï¼‰å½“scopeçš„å–å€¼ä¸ºprototypeæ—¶ â€‹ Beançš„å®ä¾‹åŒ–ä¸ªæ•°ï¼šå¤šä¸ª â€‹ Beançš„å®ä¾‹åŒ–æ—¶æœºï¼šå½“è°ƒç”¨getBean()æ–¹æ³•æ—¶å®ä¾‹åŒ–Bean å¯¹è±¡åˆ›å»ºï¼šå½“ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œåˆ›å»ºæ–°çš„å¯¹è±¡å®ä¾‹ å¯¹è±¡è¿è¡Œï¼šåªè¦å¯¹è±¡åœ¨ä½¿ç”¨ä¸­ï¼Œå°±ä¸€ç›´æ´»ç€ å¯¹è±¡é”€æ¯ï¼šå½“å¯¹è±¡é•¿æ—¶é—´ä¸ç”¨æ—¶ï¼Œè¢« Java çš„åƒåœ¾å›æ”¶å™¨å›æ”¶äº† 3.3 Beanç”Ÿå‘½å‘¨æœŸé…ç½®init-methodï¼šæŒ‡å®šç±»ä¸­çš„åˆå§‹åŒ–æ–¹æ³•åç§° destroy-methodï¼šæŒ‡å®šç±»ä¸­é”€æ¯æ–¹æ³•åç§° 3.4 Beanå®ä¾‹åŒ–ä¸‰ç§æ–¹å¼1ï¼‰ ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ– â€‹ å®ƒä¼šæ ¹æ®é»˜è®¤æ— å‚æ„é€ æ–¹æ³•æ¥åˆ›å»ºç±»å¯¹è±¡ï¼Œå¦‚æœbeanä¸­æ²¡æœ‰é»˜è®¤æ— å‚æ„é€ å‡½æ•°ï¼Œå°†ä¼šåˆ›å»ºå¤±è´¥ &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;/&gt; 2ï¼‰ å·¥å‚é™æ€æ–¹æ³•å®ä¾‹åŒ– â€‹ å·¥å‚çš„é™æ€æ–¹æ³•è¿”å›Beanå®ä¾‹ public class StaticFactoryBean { public static UserDao createUserDao(){ return new UserDaoImpl(); } } &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.factory.StaticFactoryBean&quot; factory-method=&quot;createUserDao&quot; /&gt; 3ï¼‰ å·¥å‚å®ä¾‹æ–¹æ³•å®ä¾‹åŒ– â€‹ å·¥å‚çš„éé™æ€æ–¹æ³•è¿”å›Beanå®ä¾‹ public class DynamicFactoryBean { public UserDao createUserDao(){ return new UserDaoImpl(); } } &lt;bean id=&quot;factoryBean&quot; class=&quot;com.itheima.factory.DynamicFactoryBean&quot;/&gt; &lt;bean id=&quot;userDao&quot; factory-bean=&quot;factoryBean&quot; factory-method=&quot;createUserDao&quot;/&gt; 3.5 Beançš„ä¾èµ–æ³¨å…¥å…¥é—¨â‘ åˆ›å»º UserServiceï¼ŒUserService å†…éƒ¨åœ¨è°ƒç”¨ UserDaoçš„save() æ–¹æ³• public class UserServiceImpl implements UserService { @Override public void save() { ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); UserDao userDao = (UserDao) applicationContext.getBean(&quot;userDao&quot;); userDao.save(); } } â‘¡å°† UserServiceImpl çš„åˆ›å»ºæƒäº¤ç»™ Spring &lt;bean id=&quot;userService&quot; class=&quot;com.itheima.service.impl.UserServiceImpl&quot;/&gt; â‘¢ä» Spring å®¹å™¨ä¸­è·å¾— UserService è¿›è¡Œæ“ä½œ ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); UserService userService = (UserService) applicationContext.getBean(&quot;userService&quot;); userService.save(); 3.6 Beançš„ä¾èµ–æ³¨å…¥æ¦‚å¿µä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ï¼šå®ƒæ˜¯ Spring æ¡†æ¶æ ¸å¿ƒ IOC çš„å…·ä½“å®ç°ã€‚ åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œé€šè¿‡æ§åˆ¶åè½¬ï¼ŒæŠŠå¯¹è±¡çš„åˆ›å»ºäº¤ç»™äº† Springï¼Œä½†æ˜¯ä»£ç ä¸­ä¸å¯èƒ½å‡ºç°æ²¡æœ‰ä¾èµ–çš„æƒ…å†µã€‚ IOC è§£è€¦åªæ˜¯é™ä½ä»–ä»¬çš„ä¾èµ–å…³ç³»ï¼Œä½†ä¸ä¼šæ¶ˆé™¤ã€‚ä¾‹å¦‚ï¼šä¸šåŠ¡å±‚ä»ä¼šè°ƒç”¨æŒä¹…å±‚çš„æ–¹æ³•ã€‚ é‚£è¿™ç§ä¸šåŠ¡å±‚å’ŒæŒä¹…å±‚çš„ä¾èµ–å…³ç³»ï¼Œåœ¨ä½¿ç”¨ Spring ä¹‹åï¼Œå°±è®© Spring æ¥ç»´æŠ¤äº†ã€‚ ç®€å•çš„è¯´ï¼Œå°±æ˜¯åç­‰æ¡†æ¶æŠŠæŒä¹…å±‚å¯¹è±¡ä¼ å…¥ä¸šåŠ¡å±‚ï¼Œè€Œä¸ç”¨æˆ‘ä»¬è‡ªå·±å»è·å– 3.7 Beançš„ä¾èµ–æ³¨å…¥æ–¹å¼â‘ æ„é€ æ–¹æ³• â€‹ åˆ›å»ºæœ‰å‚æ„é€  public class UserServiceImpl implements UserService { @Override public void save() { ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); UserDao userDao = (UserDao) applicationContext.getBean(&quot;userDao&quot;); userDao.save(); } } â€‹ é…ç½®Springå®¹å™¨è°ƒç”¨æœ‰å‚æ„é€ æ—¶è¿›è¡Œæ³¨å…¥ &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;/&gt; &lt;bean id=&quot;userService&quot; class=&quot;com.itheima.service.impl.UserServiceImpl&quot;&gt; &lt;constructor-arg name=&quot;userDao&quot; ref=&quot;userDao&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt; â‘¡setæ–¹æ³• â€‹ åœ¨UserServiceImplä¸­æ·»åŠ setUserDaoæ–¹æ³• public class UserServiceImpl implements UserService { private UserDao userDao; public void setUserDao(UserDao userDao) { this.userDao = userDao; } @Override public void save() { userDao.save(); } } â€‹ é…ç½®Springå®¹å™¨è°ƒç”¨setæ–¹æ³•è¿›è¡Œæ³¨å…¥ &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;/&gt; &lt;bean id=&quot;userService&quot; class=&quot;com.itheima.service.impl.UserServiceImpl&quot;&gt; &lt;property name=&quot;userDao&quot; ref=&quot;userDao&quot;/&gt; &lt;/bean&gt; setæ–¹æ³•:På‘½åç©ºé—´æ³¨å…¥ â€‹ På‘½åç©ºé—´æ³¨å…¥æœ¬è´¨ä¹Ÿæ˜¯setæ–¹æ³•æ³¨å…¥ï¼Œä½†æ¯”èµ·ä¸Šè¿°çš„setæ–¹æ³•æ³¨å…¥æ›´åŠ æ–¹ä¾¿ï¼Œä¸»è¦ä½“ç°åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹ï¼š â€‹ é¦–å…ˆï¼Œéœ€è¦å¼•å…¥På‘½åç©ºé—´ï¼š xmlns:p=&quot;http://www.springframework.org/schema/p&quot; å…¶æ¬¡ï¼Œéœ€è¦ä¿®æ”¹æ³¨å…¥æ–¹å¼ &lt;bean id=&quot;userService&quot; class=&quot;com.itheima.service.impl.UserServiceImpl&quot; p:userDao-ref=&quot;userDao&quot;/&gt; 3.8 Beançš„ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹ä¸Šé¢çš„æ“ä½œï¼Œéƒ½æ˜¯æ³¨å…¥çš„å¼•ç”¨Beanï¼Œå¤„äº†å¯¹è±¡çš„å¼•ç”¨å¯ä»¥æ³¨å…¥ï¼Œæ™®é€šæ•°æ®ç±»å‹ï¼Œé›†åˆç­‰éƒ½å¯ä»¥åœ¨å®¹å™¨ä¸­è¿›è¡Œæ³¨å…¥ã€‚ æ³¨å…¥æ•°æ®çš„ä¸‰ç§æ•°æ®ç±»å‹ æ™®é€šæ•°æ®ç±»å‹ å¼•ç”¨æ•°æ®ç±»å‹ é›†åˆæ•°æ®ç±»å‹ å…¶ä¸­å¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°äº†ï¼Œä¹‹å‰çš„æ“ä½œéƒ½æ˜¯å¯¹UserDaoå¯¹è±¡çš„å¼•ç”¨è¿›è¡Œæ³¨å…¥çš„ï¼Œä¸‹é¢å°†ä»¥setæ–¹æ³•æ³¨å…¥ä¸ºä¾‹ï¼Œæ¼”ç¤ºæ™®é€šæ•°æ®ç±»å‹å’Œé›†åˆæ•°æ®ç±»å‹çš„æ³¨å…¥ã€‚ Beançš„ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹ ï¼ˆ1ï¼‰æ™®é€šæ•°æ®ç±»å‹çš„æ³¨å…¥ public class UserDaoImpl implements UserDao { private String company; private int age; public void setCompany(String company) { this.company = company; } public void setAge(int age) { this.age = age; } public void save() { System.out.println(company+&quot;===&quot;+age); System.out.println(&quot;UserDao save method running....&quot;); } } &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;company&quot; value=&quot;ä¼ æ™ºæ’­å®¢&quot;&gt;&lt;/property&gt; &lt;property name=&quot;age&quot; value=&quot;15&quot;&gt;&lt;/property&gt; &lt;/bean&gt; ï¼ˆ2ï¼‰é›†åˆæ•°æ®ç±»å‹ï¼ˆListï¼‰çš„æ³¨å…¥ public class UserDaoImpl implements UserDao { private List&lt;String&gt; strList; public void setStrList(List&lt;String&gt; strList) { this.strList = strList; } public void save() { System.out.println(strList); System.out.println(&quot;UserDao save method running....&quot;); } } &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;strList&quot;&gt; &lt;list&gt; &lt;value&gt;aaa&lt;/value&gt; &lt;value&gt;bbb&lt;/value&gt; &lt;value&gt;ccc&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; ï¼ˆ3ï¼‰é›†åˆæ•°æ®ç±»å‹ï¼ˆListï¼‰çš„æ³¨å…¥ public class UserDaoImpl implements UserDao { private List&lt;User&gt; userList; public void setUserList(List&lt;User&gt; userList) { this.userList = userList; } public void save() { System.out.println(userList); System.out.println(&quot;UserDao save method running....&quot;); } } &lt;bean id=&quot;u1&quot; class=&quot;com.itheima.domain.User&quot;/&gt; &lt;bean id=&quot;u2&quot; class=&quot;com.itheima.domain.User&quot;/&gt; &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;userList&quot;&gt; &lt;list&gt; &lt;bean class=&quot;com.itheima.domain.User&quot;/&gt; &lt;bean class=&quot;com.itheima.domain.User&quot;/&gt; &lt;ref bean=&quot;u1&quot;/&gt; &lt;ref bean=&quot;u2&quot;/&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; ï¼ˆ4ï¼‰é›†åˆæ•°æ®ç±»å‹ï¼ˆ Map&lt;String,User&gt; ï¼‰çš„æ³¨å…¥ public class UserDaoImpl implements UserDao { private Map&lt;String,User&gt; userMap; public void setUserMap(Map&lt;String, User&gt; userMap) { this.userMap = userMap; } public void save() { System.out.println(userMap); System.out.println(&quot;UserDao save method running....&quot;); } } &lt;bean id=&quot;u1&quot; class=&quot;com.itheima.domain.User&quot;/&gt; &lt;bean id=&quot;u2&quot; class=&quot;com.itheima.domain.User&quot;/&gt; &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;userMap&quot;&gt; &lt;map&gt; &lt;entry key=&quot;user1&quot; value-ref=&quot;u1&quot;/&gt; &lt;entry key=&quot;user2&quot; value-ref=&quot;u2&quot;/&gt; &lt;/map&gt; &lt;/property&gt; &lt;/bean&gt; ï¼ˆ5ï¼‰é›†åˆæ•°æ®ç±»å‹ï¼ˆPropertiesï¼‰çš„æ³¨å…¥ public class UserDaoImpl implements UserDao { private Properties properties; public void setProperties(Properties properties) { this.properties = properties; } public void save() { System.out.println(properties); System.out.println(&quot;UserDao save method running....&quot;); } } &lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;properties&quot;&gt; &lt;props&gt; &lt;prop key=&quot;p1&quot;&gt;aaa&lt;/prop&gt; &lt;prop key=&quot;p2&quot;&gt;bbb&lt;/prop&gt; &lt;prop key=&quot;p3&quot;&gt;ccc&lt;/prop&gt; &lt;/props&gt; &lt;/property&gt; &lt;/bean&gt; 3.9 å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶ï¼ˆåˆ†æ¨¡å—å¼€å‘ï¼‰å®é™…å¼€å‘ä¸­ï¼ŒSpringçš„é…ç½®å†…å®¹éå¸¸å¤šï¼Œè¿™å°±å¯¼è‡´Springé…ç½®å¾ˆç¹æ‚ä¸”ä½“ç§¯å¾ˆå¤§ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥å°†éƒ¨åˆ†é…ç½®æ‹†è§£åˆ°å…¶ä»–é…ç½®æ–‡ä»¶ä¸­ï¼Œè€Œåœ¨Springä¸»é…ç½®æ–‡ä»¶é€šè¿‡importæ ‡ç­¾è¿›è¡ŒåŠ è½½ &lt;import resource=&quot;applicationContext-xxx.xml&quot;/&gt; 4. springç›¸å…³API4.1 ApplicationContextçš„ç»§æ‰¿ä½“ç³»applicationContextï¼šæ¥å£ç±»å‹ï¼Œä»£è¡¨åº”ç”¨ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥é€šè¿‡å…¶å®ä¾‹è·å¾— Spring å®¹å™¨ä¸­çš„ Bean å¯¹è±¡ 4.2 ApplicationContextçš„å®ç°ç±»1ï¼‰ClassPathXmlApplicationContext â€‹ å®ƒæ˜¯ä»ç±»çš„æ ¹è·¯å¾„ä¸‹åŠ è½½é…ç½®æ–‡ä»¶ æ¨èä½¿ç”¨è¿™ç§ 2ï¼‰FileSystemXmlApplicationContext â€‹ å®ƒæ˜¯ä»ç£ç›˜è·¯å¾„ä¸ŠåŠ è½½é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥åœ¨ç£ç›˜çš„ä»»æ„ä½ç½®ã€‚ 3ï¼‰AnnotationConfigApplicationContext â€‹ å½“ä½¿ç”¨æ³¨è§£é…ç½®å®¹å™¨å¯¹è±¡æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ­¤ç±»æ¥åˆ›å»º spring å®¹å™¨ã€‚å®ƒç”¨æ¥è¯»å–æ³¨è§£ã€‚ 4.3 getBean()æ–¹æ³•ä½¿ç”¨public Object getBean(String name) throws BeansException { assertBeanFactoryActive(); return getBeanFactory().getBean(name); } public &lt;T&gt; T getBean(Class&lt;T&gt; requiredType) throws BeansException { assertBeanFactoryActive(); return getBeanFactory().getBean(requiredType); } å…¶ä¸­ï¼Œå½“å‚æ•°çš„æ•°æ®ç±»å‹æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œè¡¨ç¤ºæ ¹æ®Beançš„idä»å®¹å™¨ä¸­è·å¾—Beanå®ä¾‹ï¼Œè¿”å›æ˜¯Objectï¼Œéœ€è¦å¼ºè½¬ã€‚ å½“å‚æ•°çš„æ•°æ®ç±»å‹æ˜¯Classç±»å‹æ—¶ï¼Œè¡¨ç¤ºæ ¹æ®ç±»å‹ä»å®¹å™¨ä¸­åŒ¹é…Beanå®ä¾‹ï¼Œå½“å®¹å™¨ä¸­ç›¸åŒç±»å‹çš„Beanæœ‰å¤šä¸ªæ—¶ï¼Œåˆ™æ­¤æ–¹æ³•ä¼šæŠ¥é”™ getBean()æ–¹æ³•ä½¿ç”¨ ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); UserService userService1 = (UserService) applicationContext.getBean(&quot;userService&quot;); UserService userService2 = applicationContext.getBean(UserService.class);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"https://lingdas.github.io/tags/springboot/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://lingdas.github.io/categories/æŠ€æœ¯/"}]}]}